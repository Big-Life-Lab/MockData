#| warning: false
#| message: false
#| output: false
library(dplyr)       # Data manipulation
library(simstudy)    # Generate simulated data sets: https://cran.r-project.org/web/packages/simstudy/vignettes/simstudy.html
# source helper functions
variables <- read.csv("Worksheets/phiatyll_variables.csv", header = T, check.names=FALSE, na.strings=c("","NA","N/A"))
variable_details_c <- read.csv("Worksheets/cchsflow-variable-details.csv", header = T, check.names=FALSE, na.strings=c("","NA","N/A"))
variable_details_p <- read.csv("Worksheets/phiatyll_variables_details.csv", header = T, check.names=FALSE, na.strings=c("","NA","N/A"))
variable_details <- bind_rows(variable_details_c, variable_details_p) %>%
filter(variable %in% variables$variable)
#| warning: false
#| message: false
#| output: false
library(dplyr)       # Data manipulation
library(stringr)     # Working with strings
library(simstudy)    # Generate simulated data sets: https://cran.r-project.org/web/packages/simstudy/vignettes/simstudy.html
# source helper functions
var_derived <- variable_details %>% filter(str_detect(variableStart, "DerivedVar::"))
var_derived <- variable_details[str_detect(variable_details$variableStart, "DerivedVar::"), "variable"]
var_derived <- unique(variable_details[str_detect(variable_details$variableStart, "DerivedVar::"), "variable"])
var_derived
var_cat <- unique(variables[variables$variableType == "Categorical", "variable"])
var_cat <- var_cat[!(var_cat %in% var_derived)] # remove derived variable
# --- derived variables ---
var_derived <- unique(variable_details[str_detect(variable_details$variableStart, "DerivedVar::"), "variable"])
# --- original variables ---
# categorical variables
var_cat <- unique(variables[variables$variableType == "Categorical", "variable"])
var_cat <- var_cat[!(var_cat %in% var_derived)] # remove derived variable
# continuous variables
var_con <- unique(variables[variables$variableType == "Continuous", "variable"])
var_con <- var_con[!(var_con %in% var_derived)] # remove derived variable
92+48+17
# --- derived variables ---
var_derived <- unique(variable_details[str_detect(variable_details$variableStart, "DerivedVar::"), "variable"])
# --- original variables ---
# categorical variables
var_cat <- unique(variables[variables$variableType == "Categorical", "variable"])
var_cat <- var_cat[!(var_cat %in% var_derived)] # remove derived variable
# continuous variables
var_con <- unique(variables[variables$variableType == "Continuous", "variable"])
var_con <- var_con[!(var_con %in% var_derived)] # remove derived variable
# check
nrow(variables) == length(var_derived) + length(var_cat) + length(var_con)
var=var_cat[1]
variable_details[variable_details$variable == variable, ]
variable_details[variable_details$variable == var, ]
