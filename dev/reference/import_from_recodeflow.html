<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Import and convert recodeflow variables and variable details metadata files to MockData configuration format — import_from_recodeflow • MockData</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Import and convert recodeflow variables and variable details metadata files to MockData configuration format — import_from_recodeflow"><meta name="description" content="Converts recodeflow variables.csv and variable_details.csv files into
MockData configuration format (mock_data_config.csv and
mock_data_config_details.csv). Filters variables by role and optionally
by database."><meta property="og:description" content="Converts recodeflow variables.csv and variable_details.csv files into
MockData configuration format (mock_data_config.csv and
mock_data_config_details.csv). Filters variables by role and optionally
by database."><link rel="stylesheet" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MockData</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting started with MockData</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-config-files.html">Generating datasets from configuration files</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-dates.html">Working with date variables</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-missing-data.html">Missing data in health surveys</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-garbage-data.html">Generating garbage data for validation testing</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>How-to guides</h6></li>
    <li><a class="dropdown-item" href="../articles/cchs-example.html">CCHS example</a></li>
    <li><a class="dropdown-item" href="../articles/chms-example.html">CHMS example</a></li>
    <li><a class="dropdown-item" href="../articles/demport-example.html">DemPoRT example: Survival analysis workflow</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Explanation</h6></li>
    <li><a class="dropdown-item" href="../articles/dates.html">Date variables and temporal data</a></li>
    <li><a class="dropdown-item" href="../articles/advanced-topics.html">Advanced topics</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Reference</h6></li>
    <li><a class="dropdown-item" href="../articles/reference-config.html">Configuration reference</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Big-Life-Lab/MockData/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Import and convert recodeflow variables and variable details metadata files to MockData configuration format</h1>
      <small class="dont-index">Source: <a href="https://github.com/Big-Life-Lab/MockData/blob/create-date-var/R/import_from_recodeflow.R" class="external-link"><code>R/import_from_recodeflow.R</code></a></small>
      <div class="d-none name"><code>import_from_recodeflow.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Converts recodeflow variables.csv and variable_details.csv files into
MockData configuration format (mock_data_config.csv and
mock_data_config_details.csv). Filters variables by role and optionally
by database.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">import_from_recodeflow</span><span class="op">(</span></span>
<span>  <span class="va">variables_path</span>,</span>
<span>  <span class="va">variable_details_path</span>,</span>
<span>  role_filter <span class="op">=</span> <span class="st">"mockdata"</span>,</span>
<span>  database <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="st">"inst/extdata/"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-variables-path">variables_path<a class="anchor" aria-label="anchor" href="#arg-variables-path"></a></dt>
<dd><p>Character. Path to recodeflow variables.csv file.</p></dd>


<dt id="arg-variable-details-path">variable_details_path<a class="anchor" aria-label="anchor" href="#arg-variable-details-path"></a></dt>
<dd><p>Character. Path to recodeflow variable_details.csv file.</p></dd>


<dt id="arg-role-filter">role_filter<a class="anchor" aria-label="anchor" href="#arg-role-filter"></a></dt>
<dd><p>Character. Role value to filter variables by. Only variables
with this role will be imported. Default is "mockdata". Use regex word boundary
matching to avoid partial matches (e.g., "mockdata" won't match "mockdata_test").</p></dd>


<dt id="arg-database">database<a class="anchor" aria-label="anchor" href="#arg-database"></a></dt>
<dd><p>Character vector or NULL. Database identifier(s) to filter by.
If NULL (default), extracts all unique databases from variables.csv databaseStart
column. If specified, only imports variables that exist in the specified database(s).</p></dd>


<dt id="arg-output-dir">output_dir<a class="anchor" aria-label="anchor" href="#arg-output-dir"></a></dt>
<dd><p>Character. Directory where output CSV files will be written.
Default is "inst/extdata/". Files will be named mock_data_config.csv and
mock_data_config_details.csv.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisible list with two data frames: config and details</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="column-mapping">Column Mapping<a class="anchor" aria-label="anchor" href="#column-mapping"></a></h3>

<div class="section">
<h4 id="variables-csv-gt-mock-data-config-csv">variables.csv -&gt; mock_data_config.csv<a class="anchor" aria-label="anchor" href="#variables-csv-gt-mock-data-config-csv"></a></h4>


<p>Direct copy: variable, role, label, labelLong, section, subject, variableType,
units, version, description (to notes)</p>
<p>Generated:</p><ul><li><p>uid: v_001, v_002, v_003, ...</p></li>
<li><p>position: 10, 20, 30, ...</p></li>
<li><p>source_database: extracted from databaseStart based on database filter</p></li>
<li><p>source_spec: basename of variables_path</p></li>
<li><p>last_updated: current date</p></li>
<li><p>seed: NA</p></li>
</ul></div>

<div class="section">
<h4 id="variable-details-csv-gt-mock-data-config-details-csv">variable_details.csv -&gt; mock_data_config_details.csv<a class="anchor" aria-label="anchor" href="#variable-details-csv-gt-mock-data-config-details-csv"></a></h4>


<p>Direct copy: variable, dummyVariable, recStart (to recEnd), catStartLabel (to catLabel),
catLabelLong, units, notes</p>
<p>Generated:</p><ul><li><p>uid: looked up from config by variable name</p></li>
<li><p>uid_detail: d_001, d_002, d_003, ...</p></li>
<li><p>proportion: left empty for user specification</p></li>
</ul></div>


</div>

<div class="section">
<h3 id="database-filtering">Database Filtering<a class="anchor" aria-label="anchor" href="#database-filtering"></a></h3>


<p>When database parameter is specified, the function:</p><ol><li><p>Filters variables.csv rows where databaseStart contains the specified database(s)</p></li>
<li><p>Filters variable_details.csv rows where databaseStart contains the specified database(s)</p></li>
<li><p>Sets source_database to the filtered database(s) in mock_data_config.csv</p></li>
</ol></div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Import all variables with role "mockdata" from all databases</span></span></span>
<span class="r-in"><span><span class="fu">import_from_recodeflow</span><span class="op">(</span></span></span>
<span class="r-in"><span>  variables_path <span class="op">=</span> <span class="st">"inst/extdata/cchs/variables_cchsflow_sample.csv"</span>,</span></span>
<span class="r-in"><span>  variable_details_path <span class="op">=</span> <span class="st">"inst/extdata/cchs/variable_details_cchsflow_sample.csv"</span>,</span></span>
<span class="r-in"><span>  role_filter <span class="op">=</span> <span class="st">"mockdata"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Import only from specific database</span></span></span>
<span class="r-in"><span><span class="fu">import_from_recodeflow</span><span class="op">(</span></span></span>
<span class="r-in"><span>  variables_path <span class="op">=</span> <span class="st">"inst/extdata/cchs/variables_cchsflow_sample.csv"</span>,</span></span>
<span class="r-in"><span>  variable_details_path <span class="op">=</span> <span class="st">"inst/extdata/cchs/variable_details_cchsflow_sample.csv"</span>,</span></span>
<span class="r-in"><span>  role_filter <span class="op">=</span> <span class="st">"mockdata"</span>,</span></span>
<span class="r-in"><span>  database <span class="op">=</span> <span class="st">"cchs2015_2016_p"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Import from multiple databases</span></span></span>
<span class="r-in"><span><span class="fu">import_from_recodeflow</span><span class="op">(</span></span></span>
<span class="r-in"><span>  variables_path <span class="op">=</span> <span class="st">"inst/extdata/cchs/variables_cchsflow_sample.csv"</span>,</span></span>
<span class="r-in"><span>  variable_details_path <span class="op">=</span> <span class="st">"inst/extdata/cchs/variable_details_cchsflow_sample.csv"</span>,</span></span>
<span class="r-in"><span>  role_filter <span class="op">=</span> <span class="st">"mockdata"</span>,</span></span>
<span class="r-in"><span>  database <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cchs2015_2016_p"</span>, <span class="st">"cchs2017_2018_p"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>
Developed by Juan Li and recodeflow contributors.
</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

