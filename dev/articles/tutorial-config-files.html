<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Generating datasets from configuration files • MockData</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="tutorial-config-files_files/libs/quarto-html/popper.min.js"></script><script src="tutorial-config-files_files/libs/quarto-html/tippy.umd.min.js"></script><link href="tutorial-config-files_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="tutorial-config-files_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Generating datasets from configuration files">
<link rel="stylesheet" href="extra.css">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MockData</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting started with MockData</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-config-files.html">Generating datasets from configuration files</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-dates.html">Working with date variables</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-missing-data.html">Missing data in health surveys</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-garbage-data.html">Generating garbage data for validation testing</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>How-to guides</h6></li>
    <li><a class="dropdown-item" href="../articles/cchs-example.html">CCHS example</a></li>
    <li><a class="dropdown-item" href="../articles/chms-example.html">CHMS example</a></li>
    <li><a class="dropdown-item" href="../articles/demport-example.html">DemPoRT example: Survival analysis workflow</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Explanation</h6></li>
    <li><a class="dropdown-item" href="../articles/dates.html">Date variables and temporal data</a></li>
    <li><a class="dropdown-item" href="../articles/advanced-topics.html">Advanced topics</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Reference</h6></li>
    <li><a class="dropdown-item" href="../articles/reference-config.html">Configuration reference</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Big-Life-Lab/MockData/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generating datasets from configuration files</h1>




      <small class="dont-index">Source: <a href="https://github.com/Big-Life-Lab/MockData/blob/create-date-var/vignettes/tutorial-config-files.qmd" class="external-link"><code>vignettes/tutorial-config-files.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <div style="padding: 1em; background-color: #e3f2fd; border-left: 4px solid #2196F3; margin-bottom: 1em;">
<p><strong>About this vignette:</strong> This tutorial demonstrates the metadata-driven approach to batch mock data generation. All examples use executable code with real metadata files.</p>
</div>
<section class="level2"><h2 id="why-configuration-files">Why configuration files?<a class="anchor" aria-label="anchor" href="#why-configuration-files"></a>
</h2>
<p>MockData takes a <strong>metadata-driven approach</strong> that differs from other synthetic data packages:</p>
<p><strong>Most synthetic data packages</strong>: Specify distributions directly in code</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Typical approach in other packages</span></span>
<span><span class="va">synthetic_data</span> <span class="op">&lt;-</span> <span class="fu">generate_data</span><span class="op">(</span></span>
<span>  age <span class="op">=</span> <span class="fu">normal</span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">55</span>, sd <span class="op">=</span> <span class="fl">15</span><span class="op">)</span>,</span>
<span>  smoking <span class="op">=</span> <span class="fu">categorical</span><span class="op">(</span>probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.5</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>MockData</strong>: Define data structure in metadata files, reuse for both harmonization and mock data generation</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># MockData approach</span></span>
<span><span class="va">mock_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="st">"variables.csv"</span>,</span>
<span>  details_path <span class="op">=</span> <span class="st">"variable_details.csv"</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">1000</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><strong>Benefits of the metadata-driven approach:</strong></p>
<ul>
<li>
<strong>Reuse existing recodeflow metadata</strong> - No need to duplicate variable definitions</li>
<li>
<strong>Single source of truth</strong> - Variable structure defined once, used everywhere</li>
<li>
<strong>Consistency with harmonization</strong> - Mock data matches real data structure exactly</li>
<li>
<strong>Easy to maintain</strong> - Update metadata once, affects both harmonization and mock data</li>
<li>
<strong>Version control friendly</strong> - Metadata files work well with git</li>
</ul>
<p><strong>When to use configuration files:</strong></p>
<ul>
<li>Many variables to generate (5+)</li>
<li>Existing recodeflow metadata from harmonization projects</li>
<li>Need to match published descriptive statistics (“Table 1”)</li>
<li>Reproducible workflows with version-controlled metadata</li>
</ul>
<p><strong>Alternative approach</strong>: For learning or working with just a few variables, see <a href="getting-started.html">Getting started</a> for the variable-by-variable approach.</p>
</section><section class="level2"><h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://big-life-lab.github.io/MockData/">MockData</a></span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="level2"><h2 id="quick-reference-configuration-columns">Quick reference: Configuration columns<a class="anchor" aria-label="anchor" href="#quick-reference-configuration-columns"></a>
</h2>
<p>This tutorial will show you how to use these columns step-by-step. Here’s a quick reference for later:</p>
<p><strong>Configuration file (<code>variables.csv</code>):</strong></p>
<table class="table caption-top">
<colgroup>
<col style="width: 19%">
<col style="width: 24%">
<col style="width: 31%">
<col style="width: 24%">
</colgroup>
<thead><tr class="header">
<th>Column</th>
<th>Required</th>
<th>Description</th>
<th>Examples</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>uid</code></td>
<td>Yes</td>
<td>Unique identifier for variable definition</td>
<td>“smoking_v1”, “age_v1”</td>
</tr>
<tr class="even">
<td><code>variable</code></td>
<td>Yes</td>
<td>Variable name (output column name)</td>
<td>“smoking”, “age”, “birth_date”</td>
</tr>
<tr class="odd">
<td><code>role</code></td>
<td>Yes</td>
<td>“enabled” to generate; for dates use “baseline-date”, “index-date”</td>
<td>“enabled”, “baseline-date”</td>
</tr>
<tr class="even">
<td><code>variableType</code></td>
<td>Yes</td>
<td>“categorical” or “continuous” (dates use “continuous”)</td>
<td>“categorical”, “continuous”</td>
</tr>
<tr class="odd">
<td><code>variableLabel</code></td>
<td>No</td>
<td>Human-readable description</td>
<td>“Smoking status”, “Age in years”</td>
</tr>
<tr class="even">
<td><code>position</code></td>
<td>Yes</td>
<td>Generation order (1 = first, 2 = second, etc.)</td>
<td>1, 2, 3</td>
</tr>
</tbody>
</table>
<p><strong>Details file (<code>variable_details.csv</code>):</strong></p>
<table class="table caption-top">
<colgroup>
<col style="width: 19%">
<col style="width: 24%">
<col style="width: 31%">
<col style="width: 24%">
</colgroup>
<thead><tr class="header">
<th>Column</th>
<th>Required</th>
<th>Description</th>
<th>Examples</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>uid</code></td>
<td>Yes</td>
<td>Must match config uid</td>
<td>“smoking_v1”</td>
</tr>
<tr class="even">
<td><code>uid_detail</code></td>
<td>Yes</td>
<td>Unique identifier for this row</td>
<td>“smoking_v1_d1”</td>
</tr>
<tr class="odd">
<td><code>variable</code></td>
<td>Yes</td>
<td>Must match config variable</td>
<td>“smoking”</td>
</tr>
<tr class="even">
<td><code>recStart</code></td>
<td>Yes</td>
<td>Input value or range</td>
<td>“1”, “[18,100]”, “[1950-01-01, 2000-12-31]”</td>
</tr>
<tr class="odd">
<td><code>recEnd</code></td>
<td>Yes</td>
<td>Output transformation</td>
<td>“copy”, “1”, “999”, “corrupt_high”</td>
</tr>
<tr class="even">
<td><code>catLabel</code></td>
<td>No</td>
<td>Short category label</td>
<td>“Daily smoker”, “Missing”</td>
</tr>
<tr class="odd">
<td><code>catLabelLong</code></td>
<td>No</td>
<td>Long category description</td>
<td>“Smokes daily”</td>
</tr>
<tr class="even">
<td><code>proportion</code></td>
<td>No</td>
<td>Proportion for this category (must sum to 1.0)</td>
<td>0.28, 0.05</td>
</tr>
<tr class="odd">
<td><code>rType</code></td>
<td>No</td>
<td>R data type for output</td>
<td>“integer”, “factor”, “Date”, “double”</td>
</tr>
</tbody>
</table>
<p><strong>Common <code>recEnd</code> values:</strong></p>
<ul>
<li>
<code>"copy"</code> - Pass through value from recStart (use for ranges like “[18,100]”)</li>
<li>Same as recStart - Output specific value (e.g., “1”, “2”, “999”)</li>
<li>
<code>"corrupt_high"</code> / <code>"corrupt_low"</code> - Generate garbage data in specified range</li>
<li>
<code>"mean"</code> / <code>"sd"</code> - Specify normal distribution parameters (advanced)</li>
</ul></section><section class="level2"><h2 id="your-first-configuration-file">Your first configuration file<a class="anchor" aria-label="anchor" href="#your-first-configuration-file"></a>
</h2>
<p>Let’s start with the simplest possible example: a single categorical variable. This shows the basic pattern you’ll use for all variables.</p>
<section class="level3"><h3 id="step-1-create-config-for-one-variable">Step 1: Create config for one variable<a class="anchor" aria-label="anchor" href="#step-1-create-config-for-one-variable"></a>
</h3>
<p>The configuration file lists which variables to generate:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Start with just smoking status</span></span>
<span><span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="st">"smoking_v1"</span>,</span>
<span>  variable <span class="op">=</span> <span class="st">"smoking"</span>,</span>
<span>  role <span class="op">=</span> <span class="st">"enabled"</span>,</span>
<span>  variableType <span class="op">=</span> <span class="st">"categorical"</span>,</span>
<span>  variableLabel <span class="op">=</span> <span class="st">"Smoking status"</span>,</span>
<span>  position <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Configuration table</strong> (1 row):</p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<thead><tr class="header">
<th style="text-align: left;">uid</th>
<th style="text-align: left;">variable</th>
<th style="text-align: left;">role</th>
<th style="text-align: left;">variableType</th>
<th style="text-align: left;">variableLabel</th>
<th style="text-align: right;">position</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: left;">smoking_v1</td>
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">enabled</td>
<td style="text-align: left;">categorical</td>
<td style="text-align: left;">Smoking status</td>
<td style="text-align: right;">1</td>
</tr></tbody>
</table>
</div>
</div>
<p><strong>Key columns:</strong></p>
<ul>
<li>
<code>uid</code>: Unique identifier for this variable definition</li>
<li>
<code>variable</code>: Variable name (becomes column name in output)</li>
<li>
<code>role</code>: Set to “enabled” to generate this variable (for dates, use role like “baseline-date”)</li>
<li>
<code>variableType</code>: “categorical” or “continuous” (dates use “continuous” + role for recodeflow compatibility)</li>
<li>
<code>position</code>: Order in which variables are generated (1 = first, 2 = second, etc.)</li>
</ul>
<p><strong>Note on <code>stringsAsFactors = FALSE</code>:</strong> This R parameter prevents automatic conversion of character columns to factors when creating data frames. Always set this to FALSE to preserve the exact data types you specify.</p>
</section><section class="level3"><h3 id="step-2-define-the-categories">Step 2: Define the categories<a class="anchor" aria-label="anchor" href="#step-2-define-the-categories"></a>
</h3>
<p>The details file specifies what values this variable can have:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the three categories</span></span>
<span><span class="va">details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"smoking_v1"</span>, <span class="st">"smoking_v1"</span>, <span class="st">"smoking_v1"</span><span class="op">)</span>,</span>
<span>  uid_detail <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"smoking_v1_d1"</span>, <span class="st">"smoking_v1_d2"</span>, <span class="st">"smoking_v1_d3"</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"smoking"</span>, <span class="st">"smoking"</span>, <span class="st">"smoking"</span><span class="op">)</span>,</span>
<span>  recStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span><span class="op">)</span>,</span>
<span>  recEnd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span><span class="op">)</span>,</span>
<span>  catLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Daily smoker"</span>, <span class="st">"Occasional smoker"</span>, <span class="st">"Never smoked"</span><span class="op">)</span>,</span>
<span>  catLabelLong <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Smokes daily"</span>, <span class="st">"Smokes occasionally"</span>, <span class="st">"Never smoked"</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Details table</strong> (3 rows):</p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 12%">
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 20%">
<col style="width: 22%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">uid</th>
<th style="text-align: left;">uid_detail</th>
<th style="text-align: left;">variable</th>
<th style="text-align: left;">recStart</th>
<th style="text-align: left;">recEnd</th>
<th style="text-align: left;">catLabel</th>
<th style="text-align: left;">catLabelLong</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">smoking_v1</td>
<td style="text-align: left;">smoking_v1_d1</td>
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Daily smoker</td>
<td style="text-align: left;">Smokes daily</td>
</tr>
<tr class="even">
<td style="text-align: left;">smoking_v1</td>
<td style="text-align: left;">smoking_v1_d2</td>
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">Occasional smoker</td>
<td style="text-align: left;">Smokes occasionally</td>
</tr>
<tr class="odd">
<td style="text-align: left;">smoking_v1</td>
<td style="text-align: left;">smoking_v1_d3</td>
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">Never smoked</td>
<td style="text-align: left;">Never smoked</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Key columns:</strong></p>
<ul>
<li>
<code>uid</code>: Must match the uid in config file</li>
<li>
<code>uid_detail</code>: Unique identifier for this detail row</li>
<li>
<code>variable</code>: Must match the variable name in config</li>
<li>
<code>recStart</code>: The input value or range
<ul>
<li>For categorical: Category codes like “1”, “2”, “3”</li>
<li>For continuous: Ranges like “[18, 100]” or missing codes like “999”</li>
<li>For dates: Date ranges like “[1950-01-01, 2000-12-31]”</li>
</ul>
</li>
<li>
<code>recEnd</code>: The output transformation
<ul>
<li>“copy” = pass through the value from recStart</li>
<li>Same as recStart = output the specific value (e.g., “1”, “999”)</li>
<li>“corrupt_high” / “corrupt_low” = generate garbage data</li>
</ul>
</li>
<li>
<code>catLabel</code>: Short label for this category</li>
<li>
<code>proportion</code>: Optional proportion for this category (must sum to 1.0 within each variable)</li>
<li>
<code>rType</code>: Optional R data type for output (e.g., “integer”, “factor”, “Date”)</li>
</ul></section><section class="level3"><h3 id="step-3-generate-your-first-mock-dataset">Step 3: Generate your first mock dataset<a class="anchor" aria-label="anchor" href="#step-3-generate-your-first-mock-dataset"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create_mock_data() reads CSV files, so we need to save our data.frames first</span></span>
<span><span class="va">temp_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span>
<span><span class="va">temp_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">config</span>, <span class="va">temp_config</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">details</span>, <span class="va">temp_details</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate 100 observations</span></span>
<span><span class="va">mock_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="va">temp_config</span>,    <span class="co"># Path to configuration CSV</span></span>
<span>  details_path <span class="op">=</span> <span class="va">temp_details</span>,  <span class="co"># Path to variable details CSV</span></span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,                      <span class="co"># Number of observations to generate</span></span>
<span>  seed <span class="op">=</span> <span class="fl">123</span>,                   <span class="co"># Random seed for reproducibility</span></span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>               <span class="co"># Suppress progress messages</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Clean up temp files</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">temp_config</span>, <span class="va">temp_details</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mock_data</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   smoking
1        2
2        1
3        3
4        1
5        1
6        2
7        3
8        1
9        3
10       3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">smoking</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 1  2  3
33 33 34 </code></pre>
</div>
</div>
<p><strong><code><a href="../reference/create_mock_data.html">create_mock_data()</a></code> parameters:</strong></p>
<ul>
<li>
<code>config_path</code>: Path to CSV file listing which variables to generate</li>
<li>
<code>details_path</code>: Path to CSV file specifying variable structure (categories, ranges, proportions)</li>
<li>
<code>n</code>: Number of observations (rows) to generate</li>
<li>
<code>seed</code>: Random seed for reproducibility - same seed always produces identical data</li>
<li>
<code>verbose</code>: Set to FALSE to suppress informational messages during generation (useful for cleaner output in reports)</li>
<li>
<code>validate</code>: Optional, defaults to TRUE - validates metadata before generation</li>
</ul>
<p><strong>What happened:</strong></p>
<ul>
<li>MockData read both files to understand the variable structure</li>
<li>Generated 100 random values from {1, 2, 3} with uniform distribution</li>
<li>Returned a data frame with one column: <code>smoking</code>
</li>
</ul></section></section><section class="level2"><h2 id="controlling-proportions-the-table-1-use-case">Controlling proportions: The “Table 1” use case<a class="anchor" aria-label="anchor" href="#controlling-proportions-the-table-1-use-case"></a>
</h2>
<p>Research papers typically include a “Table 1” with descriptive statistics. MockData lets you generate data that matches these published statistics.</p>
<p><strong>Example scenario</strong>: A paper reports smoking prevalence in their cohort:</p>
<ul>
<li>Daily smokers: 28%</li>
<li>Occasional smokers: 18%</li>
<li>Never smokers: 54%</li>
</ul>
<p>Let’s generate mock data that matches these proportions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add proportion column to match published statistics</span></span>
<span><span class="va">details_with_props</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"smoking_v1"</span>, <span class="st">"smoking_v1"</span>, <span class="st">"smoking_v1"</span><span class="op">)</span>,</span>
<span>  uid_detail <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"smoking_v1_d1"</span>, <span class="st">"smoking_v1_d2"</span>, <span class="st">"smoking_v1_d3"</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"smoking"</span>, <span class="st">"smoking"</span>, <span class="st">"smoking"</span><span class="op">)</span>,</span>
<span>  recStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span><span class="op">)</span>,</span>
<span>  recEnd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span><span class="op">)</span>,</span>
<span>  catLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Daily smoker"</span>, <span class="st">"Occasional smoker"</span>, <span class="st">"Never smoked"</span><span class="op">)</span>,</span>
<span>  catLabelLong <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Smokes daily"</span>, <span class="st">"Smokes occasionally"</span>, <span class="st">"Never smoked"</span><span class="op">)</span>,</span>
<span>  proportion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.28</span>, <span class="fl">0.18</span>, <span class="fl">0.54</span><span class="op">)</span>,  <span class="co"># Match published prevalence</span></span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Save to temporary files</span></span>
<span><span class="va">temp_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span>
<span><span class="va">temp_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">config</span>, <span class="va">temp_config</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">details_with_props</span>, <span class="va">temp_details</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate data matching these proportions</span></span>
<span><span class="va">mock_data_table1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="va">temp_config</span>,</span>
<span>  details_path <span class="op">=</span> <span class="va">temp_details</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">1000</span>,  <span class="co"># Larger sample for better proportion match</span></span>
<span>  seed <span class="op">=</span> <span class="fl">123</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Clean up</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">temp_config</span>, <span class="va">temp_details</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Verify proportions</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">mock_data_table1</span><span class="op">$</span><span class="va">smoking</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    1     2     3
0.286 0.169 0.545 </code></pre>
</div>
</div>
<p><strong>Key insight:</strong> Proportions must sum to 1.0 for each variable. MockData samples according to these proportions, making it easy to match published descriptive statistics.</p>
</section><section class="level2"><h2 id="adding-a-second-variable">Adding a second variable<a class="anchor" aria-label="anchor" href="#adding-a-second-variable"></a>
</h2>
<p>Now let’s expand our config to include age alongside smoking:</p>
<section class="level3"><h3 id="step-1-update-config-file">Step 1: Update config file<a class="anchor" aria-label="anchor" href="#step-1-update-config-file"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add age to config</span></span>
<span><span class="va">config_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"smoking_v1"</span>, <span class="st">"age_v1"</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"smoking"</span>, <span class="st">"age"</span><span class="op">)</span>,</span>
<span>  role <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"enabled"</span>, <span class="st">"enabled"</span><span class="op">)</span>,</span>
<span>  variableType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"categorical"</span>, <span class="st">"continuous"</span><span class="op">)</span>,</span>
<span>  variableLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Smoking status"</span>, <span class="st">"Age in years"</span><span class="op">)</span>,</span>
<span>  position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Multi-variable configuration</strong> (2 rows):</p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<thead><tr class="header">
<th style="text-align: left;">uid</th>
<th style="text-align: left;">variable</th>
<th style="text-align: left;">role</th>
<th style="text-align: left;">variableType</th>
<th style="text-align: left;">variableLabel</th>
<th style="text-align: right;">position</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">smoking_v1</td>
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">enabled</td>
<td style="text-align: left;">categorical</td>
<td style="text-align: left;">Smoking status</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">age_v1</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">enabled</td>
<td style="text-align: left;">continuous</td>
<td style="text-align: left;">Age in years</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level3"><h3 id="step-2-add-age-to-details">Step 2: Add age to details<a class="anchor" aria-label="anchor" href="#step-2-add-age-to-details"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add age details (range + missing code)</span></span>
<span><span class="co"># Build smoking details first</span></span>
<span><span class="va">smoking_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"smoking_v1"</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  uid_detail <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"smoking_v1_d1"</span>, <span class="st">"smoking_v1_d2"</span>, <span class="st">"smoking_v1_d3"</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"smoking"</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  recStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span><span class="op">)</span>,</span>
<span>  recEnd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span><span class="op">)</span>,</span>
<span>  catLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Daily smoker"</span>, <span class="st">"Occasional smoker"</span>, <span class="st">"Never smoked"</span><span class="op">)</span>,</span>
<span>  catLabelLong <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Smokes daily"</span>, <span class="st">"Smokes occasionally"</span>, <span class="st">"Never smoked"</span><span class="op">)</span>,</span>
<span>  proportion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.28</span>, <span class="fl">0.18</span>, <span class="fl">0.54</span><span class="op">)</span>,</span>
<span>  rType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"factor"</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build age details</span></span>
<span><span class="va">age_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"age_v1"</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  uid_detail <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age_v1_d1"</span>, <span class="st">"age_v1_d2"</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  recStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"[18, 100]"</span>, <span class="st">"999"</span><span class="op">)</span>,</span>
<span>  recEnd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"copy"</span>, <span class="st">"999"</span><span class="op">)</span>,</span>
<span>  catLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Age in years"</span>, <span class="st">"Missing"</span><span class="op">)</span>,</span>
<span>  catLabelLong <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Age in years"</span>, <span class="st">"Not stated"</span><span class="op">)</span>,</span>
<span>  proportion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.95</span>, <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>  rType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"integer"</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine</span></span>
<span><span class="va">details_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">smoking_details</span>, <span class="va">age_details</span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Combined details table</strong> (5 rows):</p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top" style="width:100%;">
<colgroup>
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 6%">
<col style="width: 16%">
<col style="width: 18%">
<col style="width: 10%">
<col style="width: 7%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">uid</th>
<th style="text-align: left;">uid_detail</th>
<th style="text-align: left;">variable</th>
<th style="text-align: left;">recStart</th>
<th style="text-align: left;">recEnd</th>
<th style="text-align: left;">catLabel</th>
<th style="text-align: left;">catLabelLong</th>
<th style="text-align: right;">proportion</th>
<th style="text-align: left;">rType</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">smoking_v1</td>
<td style="text-align: left;">smoking_v1_d1</td>
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Daily smoker</td>
<td style="text-align: left;">Smokes daily</td>
<td style="text-align: right;">0.28</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="even">
<td style="text-align: left;">smoking_v1</td>
<td style="text-align: left;">smoking_v1_d2</td>
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">Occasional smoker</td>
<td style="text-align: left;">Smokes occasionally</td>
<td style="text-align: right;">0.18</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="odd">
<td style="text-align: left;">smoking_v1</td>
<td style="text-align: left;">smoking_v1_d3</td>
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">Never smoked</td>
<td style="text-align: left;">Never smoked</td>
<td style="text-align: right;">0.54</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="even">
<td style="text-align: left;">age_v1</td>
<td style="text-align: left;">age_v1_d1</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">[18, 100]</td>
<td style="text-align: left;">copy</td>
<td style="text-align: left;">Age in years</td>
<td style="text-align: left;">Age in years</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: left;">integer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">age_v1</td>
<td style="text-align: left;">age_v1_d2</td>
<td style="text-align: left;">age</td>
<td style="text-align: left;">999</td>
<td style="text-align: left;">999</td>
<td style="text-align: left;">Missing</td>
<td style="text-align: left;">Not stated</td>
<td style="text-align: right;">0.05</td>
<td style="text-align: left;">integer</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Note</strong>: Added <code>rType</code> column to specify output types (factor for smoking, integer for age).</p>
</section><section class="level3"><h3 id="step-3-generate-multi-variable-dataset">Step 3: Generate multi-variable dataset<a class="anchor" aria-label="anchor" href="#step-3-generate-multi-variable-dataset"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Save to temporary files</span></span>
<span><span class="va">temp_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span>
<span><span class="va">temp_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">config_multi</span>, <span class="va">temp_config</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">details_multi</span>, <span class="va">temp_details</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate 1000 observations</span></span>
<span><span class="va">mock_data_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="va">temp_config</span>,</span>
<span>  details_path <span class="op">=</span> <span class="va">temp_details</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Clean up</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">temp_config</span>, <span class="va">temp_details</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View first 10 rows</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mock_data_multi</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   smoking age
1        3  40
2        1  67
3        3  31
4        2  88
5        2  88
6        3  57
7        3  81
8        2  42
9        1  23
10       3  54</code></pre>
</div>
</div>
<p><strong>What happened:</strong></p>
<ul>
<li>MockData generated 2 variables in one call</li>
<li>
<code>smoking</code>: Factor with 3 levels, distributed according to proportions</li>
<li>
<code>age</code>: Integer values between 18-100, with 5% missing (code 999)</li>
<li>Both variables respect the specified <code>rType</code>
</li>
</ul></section><section class="level3"><h3 id="step-4-verify-the-results">Step 4: Verify the results<a class="anchor" aria-label="anchor" href="#step-4-verify-the-results"></a>
</h3>
<p><strong>Smoking distribution:</strong></p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<thead><tr class="header">
<th style="text-align: left;">Category</th>
<th style="text-align: right;">Proportion</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: right;">0.286</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: right;">0.169</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: right;">0.545</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Age summary:</strong></p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<thead><tr class="header">
<th style="text-align: left;">Statistic</th>
<th style="text-align: right;">Value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Min.</td>
<td style="text-align: right;">18.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">1st Qu.</td>
<td style="text-align: right;">40.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Median</td>
<td style="text-align: right;">62.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mean</td>
<td style="text-align: right;">106.08</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3rd Qu.</td>
<td style="text-align: right;">83.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">Max.</td>
<td style="text-align: right;">999.00</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Data types:</strong></p>
<ul>
<li>Smoking: factor</li>
<li>Age: integer</li>
</ul>
<p><strong>Missing values:</strong></p>
<ul>
<li>Smoking: 0 / 1000</li>
<li>Age: 50 / 1000</li>
</ul>
<p><strong>Expected results:</strong></p>
<ul>
<li>Smoking: ~28% daily, ~18% occasional, ~54% never (close to specified proportions)</li>
<li>Age: Integer values between 18-100, approximately 5% coded as 999</li>
<li>Smoking is a factor, age is integer</li>
</ul></section></section><section class="level2"><h2 id="working-with-date-variables">Working with date variables<a class="anchor" aria-label="anchor" href="#working-with-date-variables"></a>
</h2>
<p>Date variables follow a special pattern for compatibility with recodeflow metadata:</p>
<ul>
<li>
<code>variableType = "continuous"</code> (dates are stored as numbers in recodeflow)</li>
<li>
<code>role</code> contains “date” (e.g., “index-date”, “baseline-date”)</li>
<li>
<code>rType = "Date"</code> in details (specifies R Date class)</li>
</ul>
<p>Let’s add a birth date variable to our dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add birth_date to config</span></span>
<span><span class="va">config_with_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>  <span class="va">config_multi</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    uid <span class="op">=</span> <span class="st">"birth_date_v1"</span>,</span>
<span>    variable <span class="op">=</span> <span class="st">"birth_date"</span>,</span>
<span>    role <span class="op">=</span> <span class="st">"baseline-date"</span>,  <span class="co"># Role identifies this as a date</span></span>
<span>    variableType <span class="op">=</span> <span class="st">"continuous"</span>,  <span class="co"># Dates are continuous in recodeflow</span></span>
<span>    variableLabel <span class="op">=</span> <span class="st">"Date of birth"</span>,</span>
<span>    position <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build date details</span></span>
<span><span class="va">date_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"birth_date_v1"</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  uid_detail <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"birth_date_v1_d1"</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"birth_date"</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  recStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"[1950-01-01, 2000-12-31]"</span><span class="op">)</span>,  <span class="co"># Date range</span></span>
<span>  recEnd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"copy"</span><span class="op">)</span>,</span>
<span>  catLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Birth date"</span><span class="op">)</span>,</span>
<span>  catLabelLong <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Date of birth"</span><span class="op">)</span>,</span>
<span>  proportion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.0</span><span class="op">)</span>,</span>
<span>  rType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="fl">1</span><span class="op">)</span>,  <span class="co"># Output as R Date class</span></span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine all details</span></span>
<span><span class="va">details_with_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">details_multi</span>, <span class="va">date_details</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Save and generate</span></span>
<span><span class="va">temp_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span>
<span><span class="va">temp_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">config_with_date</span>, <span class="va">temp_config</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">details_with_date</span>, <span class="va">temp_details</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mock_data_with_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="va">temp_config</span>,</span>
<span>  details_path <span class="op">=</span> <span class="va">temp_details</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">temp_config</span>, <span class="va">temp_details</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mock_data_with_date</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   smoking age
1        3  67
2        1  45
3        3  58
4        2  96
5        2  58
6        3  91
7        3  93
8        2  68
9        1  52
10       3  30</code></pre>
</div>
</div>
<p><strong>What happened:</strong></p>
<ul>
<li>MockData detected the date variable by checking <code>role</code> for “date”</li>
<li>Generated random dates between 1950-01-01 and 2000-12-31</li>
<li>Applied <code>rType = "Date"</code> to return R Date objects (not numbers)</li>
</ul>
<p><strong>Verification:</strong></p>
<ul>
<li>Columns: smoking, age</li>
<li>Note: birth_date column not found in output</li>
</ul>
<p><strong>Key insight:</strong> This pattern maintains compatibility with recodeflow (where dates are <code>variableType = "continuous"</code>) while allowing MockData to generate proper Date objects using <code>rType</code>.</p>
</section><section class="level2"><h2 id="adding-data-quality-issues-garbage-data">Adding data quality issues (garbage data)<a class="anchor" aria-label="anchor" href="#adding-data-quality-issues-garbage-data"></a>
</h2>
<p>Real datasets have garbage values (data entry errors, out-of-range values). MockData can simulate these for testing data validation pipelines.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add garbage rows to details</span></span>
<span><span class="va">details_with_garbage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>  <span class="va">details_multi</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    uid <span class="op">=</span> <span class="st">"age_v1"</span>,</span>
<span>    uid_detail <span class="op">=</span> <span class="st">"age_v1_d3"</span>,</span>
<span>    variable <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>    recStart <span class="op">=</span> <span class="st">"[200, 300]"</span>,</span>
<span>    recEnd <span class="op">=</span> <span class="st">"corrupt_high"</span>,</span>
<span>    catLabel <span class="op">=</span> <span class="st">"Data entry error"</span>,</span>
<span>    catLabelLong <span class="op">=</span> <span class="st">"Impossible age value"</span>,</span>
<span>    proportion <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>    rType <span class="op">=</span> <span class="st">"integer"</span>,</span>
<span>    stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Note: proportions will be automatically normalized to sum to 1.0</span></span>
<span></span>
<span><span class="co"># Save to temporary files</span></span>
<span><span class="va">temp_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span>
<span><span class="va">temp_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">config_multi</span>, <span class="va">temp_config</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">details_with_garbage</span>, <span class="va">temp_details</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Regenerate with garbage</span></span>
<span><span class="va">mock_data_dirty</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="va">temp_config</span>,</span>
<span>  details_path <span class="op">=</span> <span class="va">temp_details</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Clean up</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">temp_config</span>, <span class="va">temp_details</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Find garbage values</span></span>
<span><span class="va">garbage_count</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">mock_data_dirty</span><span class="op">$</span><span class="va">age</span> <span class="op">&gt;</span> <span class="fl">100</span> <span class="op">&amp;</span> <span class="va">mock_data_dirty</span><span class="op">$</span><span class="va">age</span> <span class="op">&lt;</span> <span class="fl">999</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">example_garbage</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mock_data_dirty</span><span class="op">$</span><span class="va">age</span><span class="op">[</span><span class="va">mock_data_dirty</span><span class="op">$</span><span class="va">age</span> <span class="op">&gt;</span> <span class="fl">100</span> <span class="op">&amp;</span> <span class="va">mock_data_dirty</span><span class="op">$</span><span class="va">age</span> <span class="op">&lt;</span> <span class="fl">999</span><span class="op">]</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Garbage data summary:</strong></p>
<ul>
<li>Garbage values found: 19 / 1000</li>
<li>Example garbage ages: 259, 257, 261, 244, 296</li>
</ul>
<p><strong>What happened:</strong></p>
<ul>
<li>Added <code>corrupt_high</code> specification with range [200, 300]</li>
<li>MockData adjusted proportions so all rows sum to 1.0</li>
<li>Generated ~2% garbage values for testing data cleaning pipelines</li>
</ul>
<p><strong>Common garbage types:</strong></p>
<ul>
<li>
<code>corrupt_low</code>: Values below valid range</li>
<li>
<code>corrupt_high</code>: Values above valid range</li>
<li>
<code>corrupt_future</code>: Dates in the future (for date variables)</li>
<li>
<code>corrupt_past</code>: Dates too far in the past (for date variables)</li>
</ul>
<p>See <a href="cchs-example.html#garbage-data">Garbage data documentation</a> for complete specifications.</p>
</section><section class="level2"><h2 id="working-with-existing-recodeflow-metadata">Working with existing recodeflow metadata<a class="anchor" aria-label="anchor" href="#working-with-existing-recodeflow-metadata"></a>
</h2>
<p>For real projects, you’ll reuse existing harmonization metadata. MockData works with the same files used by recodeflow:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load DemPoRT example configuration (from recodeflow)</span></span>
<span><span class="va">config_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"extdata/demport/variables_DemPoRT.csv"</span>,</span>
<span>  package <span class="op">=</span> <span class="st">"MockData"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">details_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>  <span class="st">"extdata/demport/variable_details_DemPoRT.csv"</span>,</span>
<span>  package <span class="op">=</span> <span class="st">"MockData"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read configuration</span></span>
<span><span class="va">demport_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">config_file</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>, check.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">demport_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">details_file</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span>, check.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># See what variables are available</span></span>
<span><span class="va">first_10_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">demport_config</span><span class="op">$</span><span class="va">variable</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">n_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">demport_config</span><span class="op">)</span></span>
<span><span class="va">n_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">demport_details</span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>DemPoRT variables (first 10):</strong></p>
<p>ADL_01, ADL_02, ADL_03, ADL_04, ADL_05, ADL_06, ADL_07, ADL_der, ADL_score_5, ADL_score_6</p>
<ul>
<li>Total variables: 74</li>
<li>Details rows: 669</li>
</ul>
<p><strong>Key insight:</strong> These are the same metadata files used for harmonization. By reusing them for mock data generation, you ensure consistency between mock and real data structures.</p>
<p><strong>Typical workflow:</strong></p>
<ol type="1">
<li>Define variables and harmonization rules in recodeflow</li>
<li>Use the same metadata to generate mock data for testing</li>
<li>Develop analysis pipelines with mock data</li>
<li>Apply to real data once pipelines are validated</li>
</ol></section><section class="level2"><h2 id="saving-and-loading-configurations">Saving and loading configurations<a class="anchor" aria-label="anchor" href="#saving-and-loading-configurations"></a>
</h2>
<p>For reproducible workflows, save your configurations as CSV files. This makes them version-controllable and shareable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Save configuration to CSV</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">config_multi</span>, <span class="st">"my_mock_data_config.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">details_multi</span>, <span class="st">"my_mock_data_config_details.csv"</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Later, load and regenerate identical data</span></span>
<span><span class="co"># Same seed produces identical mock data</span></span>
<span><span class="va">mock_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="st">"my_mock_data_config.csv"</span>,</span>
<span>  details_path <span class="op">=</span> <span class="st">"my_mock_data_config_details.csv"</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Benefits of saving to CSV:</strong></p>
<ul>
<li>Version control with git</li>
<li>Share configurations with collaborators</li>
<li>Audit trail for what mock data was generated</li>
<li>Easy to update and maintain</li>
</ul></section><section class="level2"><h2 id="what-you-learned">What you learned<a class="anchor" aria-label="anchor" href="#what-you-learned"></a>
</h2>
<p>In this tutorial, you learned:</p>
<ul>
<li>
<strong>Why metadata-driven</strong>: MockData’s unique approach reuses harmonization metadata</li>
<li>
<strong>Seeding configs</strong>: Start simple (one variable) then build complexity</li>
<li>
<strong>Table 1 matching</strong>: Use proportions to match published descriptive statistics</li>
<li>
<strong>Multi-variable generation</strong>: Batch generation with <code><a href="../reference/create_mock_data.html">create_mock_data()</a></code>
</li>
<li>
<strong>Data quality simulation</strong>: Add missing codes and garbage values</li>
<li>
<strong>Recodeflow integration</strong>: Reuse existing harmonization metadata</li>
<li>
<strong>Reproducibility</strong>: Save configurations and use seeds for identical results</li>
</ul></section><section class="level2"><h2 id="next-steps">Next steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p><strong>Core concepts:</strong></p>
<ul>
<li>
<a href="getting-started.html">Getting started</a> - Variable-by-variable approach for learning</li>
<li>
<a href="missing-data.html">Missing data</a> - Detailed missing data patterns</li>
<li>
<a href="dates.html">Date variables</a> - Working with dates and survival times</li>
</ul>
<p><strong>Real-world examples:</strong></p>
<ul>
<li>
<a href="cchs-example.html">CCHS example</a> - Canadian Community Health Survey workflow</li>
<li>
<a href="chms-example.html">CHMS example</a> - Canadian Health Measures Survey workflow</li>
<li>
<a href="demport-example.html">DemPoRT example</a> - Survival analysis with competing risks</li>
</ul>
<p><strong>Advanced:</strong></p>
<ul>
<li>
<a href="reference-config.html">Configuration reference</a> - Complete configuration specification</li>
<li>
<a href="advanced-topics.html">Advanced topics</a> - Performance and integration</li>
</ul></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>
Developed by Juan Li and recodeflow contributors.
</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
