<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Working with date variables • MockData</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="tutorial-dates_files/libs/quarto-html/popper.min.js"></script><script src="tutorial-dates_files/libs/quarto-html/tippy.umd.min.js"></script><link href="tutorial-dates_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="tutorial-dates_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Working with date variables">
<link rel="stylesheet" href="extra.css">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MockData</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting started with MockData</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-config-files.html">Generating datasets from configuration files</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-dates.html">Working with date variables</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-missing-data.html">Missing data in health surveys</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-garbage-data.html">Generating garbage data for validation testing</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>How-to guides</h6></li>
    <li><a class="dropdown-item" href="../articles/cchs-example.html">CCHS example</a></li>
    <li><a class="dropdown-item" href="../articles/chms-example.html">CHMS example</a></li>
    <li><a class="dropdown-item" href="../articles/demport-example.html">DemPoRT example: Survival analysis workflow</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Explanation</h6></li>
    <li><a class="dropdown-item" href="../articles/dates.html">Date variables and temporal data</a></li>
    <li><a class="dropdown-item" href="../articles/advanced-topics.html">Advanced topics</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Reference</h6></li>
    <li><a class="dropdown-item" href="../articles/reference-config.html">Configuration reference</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Big-Life-Lab/MockData/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Working with date variables</h1>




      <small class="dont-index">Source: <a href="https://github.com/Big-Life-Lab/MockData/blob/create-date-var/vignettes/tutorial-dates.qmd" class="external-link"><code>vignettes/tutorial-dates.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <div style="padding: 1em; background-color: #e3f2fd; border-left: 4px solid #2196F3; margin-bottom: 1em;">
<p><strong>About this vignette:</strong> This tutorial introduces temporal data generation concepts. For complete working examples, see the <a href="demport-example.html">DemPoRT example</a>.</p>
</div>
<section class="level2"><h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This tutorial introduces temporal data generation in MockData. You’ll learn how to create date variables for:</p>
<ul>
<li>
<strong>Cohort entry dates</strong> (index dates, baseline dates)</li>
<li>
<strong>Event dates</strong> (death, diagnosis, hospital admission)</li>
<li>
<strong>Time-varying exposures</strong> (follow-up visits, repeated measures)</li>
<li>
<strong>Survival analysis data</strong> (with censoring)</li>
</ul>
<p><strong>For complete working examples:</strong> See the <a href="demport-example.html">DemPoRT example</a>, which is the primary and comprehensive demonstration of date variable generation with real ICES specifications.</p>
</section><section class="level2"><h2 id="basic-date-variable-setup">Basic date variable setup<a class="anchor" aria-label="anchor" href="#basic-date-variable-setup"></a>
</h2>
<section class="level3"><h3 id="configuration-structure">Configuration structure<a class="anchor" aria-label="anchor" href="#configuration-structure"></a>
</h3>
<p>Date variables use the same two-file structure as other variables, with special <code>recEnd</code> codes:</p>
<p><strong>mock_data_config.csv:</strong></p>
<table class="table caption-top" style="width:100%;">
<colgroup>
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 10%">
<col style="width: 23%">
<col style="width: 25%">
<col style="width: 16%">
</colgroup>
<thead><tr class="header">
<th>uid</th>
<th>variable</th>
<th>role</th>
<th>variableType</th>
<th>variableLabel</th>
<th>position</th>
</tr></thead>
<tbody><tr class="odd">
<td>index_date_v1</td>
<td>index_date</td>
<td>index-date;enabled</td>
<td>Continuous</td>
<td>Cohort entry date</td>
<td>1</td>
</tr></tbody>
</table>
<p><strong>mock_data_config_details.csv:</strong></p>
<table class="table caption-top">
<colgroup>
<col style="width: 5%">
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 8%">
</colgroup>
<thead><tr class="header">
<th>uid</th>
<th>uid_detail</th>
<th>variable</th>
<th>recStart</th>
<th>recEnd</th>
<th>catLabel</th>
<th>date_start</th>
<th>date_end</th>
<th>rType</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>index_date_v1</td>
<td>index_date_v1_d1</td>
<td>index_date</td>
<td>NA</td>
<td>date_start</td>
<td>Start date</td>
<td>2001-01-01</td>
<td></td>
<td>Date</td>
</tr>
<tr class="even">
<td>index_date_v1</td>
<td>index_date_v1_d2</td>
<td>index_date</td>
<td>NA</td>
<td>date_end</td>
<td>End date</td>
<td></td>
<td>2017-03-31</td>
<td>Date</td>
</tr>
</tbody>
</table>
<p><strong>Key points:</strong></p>
<ul>
<li>Use <code>recEnd = "date_start"</code> to mark the row containing start date</li>
<li>Use <code>recEnd = "date_end"</code> to mark the row containing end date</li>
<li>Dates in <code>date_start</code> and <code>date_end</code> columns use ISO format: YYYY-MM-DD</li>
<li>Date variables need <code>rType = "Date"</code> in details</li>
<li>Date variables use <code>role</code> containing “date” (e.g., “index-date”, “outcome-date”)</li>
<li>
<code>variableType = "Continuous"</code> for date variables (for recodeflow compatibility)</li>
</ul></section><section class="level3"><h3 id="generating-date-variables">Generating date variables<a class="anchor" aria-label="anchor" href="#generating-date-variables"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://big-life-lab.github.io/MockData/">MockData</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create configuration</span></span>
<span><span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="st">"index_date_v1"</span>,</span>
<span>  variable <span class="op">=</span> <span class="st">"index_date"</span>,</span>
<span>  role <span class="op">=</span> <span class="st">"index-date,enabled"</span>,</span>
<span>  variableType <span class="op">=</span> <span class="st">"Continuous"</span>,</span>
<span>  position <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"index_date_v1"</span>, <span class="st">"index_date_v1"</span><span class="op">)</span>,</span>
<span>  uid_detail <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"index_date_v1_d1"</span>, <span class="st">"index_date_v1_d2"</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"index_date"</span>, <span class="st">"index_date"</span><span class="op">)</span>,</span>
<span>  recStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  recEnd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date_start"</span>, <span class="st">"date_end"</span><span class="op">)</span>,</span>
<span>  catLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Start date"</span>, <span class="st">"End date"</span><span class="op">)</span>,</span>
<span>  date_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2001-01-01"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  date_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"2017-03-31"</span><span class="op">)</span>,</span>
<span>  rType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"Date"</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Write to temporary files</span></span>
<span><span class="va">temp_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">config_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_dir</span>, <span class="st">"date_config.csv"</span><span class="op">)</span></span>
<span><span class="va">details_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_dir</span>, <span class="st">"date_details.csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">config</span>, <span class="va">config_path</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">details</span>, <span class="va">details_path</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate dates</span></span>
<span><span class="va">mock_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="va">config_path</span>,</span>
<span>  details_path <span class="op">=</span> <span class="va">details_path</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View distribution</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  index_date
1 2007-09-29
2 2007-11-16
3 2007-02-05
4 2002-06-10
5 2012-09-30
6 2009-03-05</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.
"2001-02-10" "2004-12-02" "2008-02-23" "2008-08-21" "2012-08-10" "2016-10-17" </code></pre>
</div>
</div>
<p><strong>Result:</strong> 100 dates uniformly distributed between 2001-01-01 and 2017-03-31.</p>
</section></section><section class="level2"><h2 id="common-temporal-patterns">Common temporal patterns<a class="anchor" aria-label="anchor" href="#common-temporal-patterns"></a>
</h2>
<section class="level3"><h3 id="pattern-1-cohort-accrual-period">Pattern 1: Cohort accrual period<a class="anchor" aria-label="anchor" href="#pattern-1-cohort-accrual-period"></a>
</h3>
<p>Simulate gradual enrollment into a study:</p>
<p><strong>Concept:</strong> Participants enter a cohort over a defined accrual period. In real studies, enrollment might be:</p>
<ul>
<li>Uniform: constant enrollment rate</li>
<li>Front-loaded: more enrollments early</li>
<li>Back-loaded: more enrollments later</li>
</ul>
<p><strong>MockData approach:</strong> Use uniform distribution within accrual window. For non-uniform patterns, generate uniform dates then transform with custom code.</p>
<p><strong>Example accrual window:</strong></p>
<table class="table caption-top">
<colgroup>
<col style="width: 5%">
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 8%">
</colgroup>
<thead><tr class="header">
<th>uid</th>
<th>uid_detail</th>
<th>variable</th>
<th>recStart</th>
<th>recEnd</th>
<th>catLabel</th>
<th>date_start</th>
<th>date_end</th>
<th>rType</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>index_date_v1</td>
<td>index_date_v1_d1</td>
<td>index_date</td>
<td>NA</td>
<td>date_start</td>
<td>Start</td>
<td>2001-01-01</td>
<td></td>
<td>Date</td>
</tr>
<tr class="even">
<td>index_date_v1</td>
<td>index_date_v1_d2</td>
<td>index_date</td>
<td>NA</td>
<td>date_end</td>
<td>End</td>
<td></td>
<td>2005-12-31</td>
<td>Date</td>
</tr>
</tbody>
</table>
<p>This creates a 5-year accrual period (2001-2005).</p>
</section><section class="level3"><h3 id="pattern-2-event-dates-with-censoring">Pattern 2: Event dates with censoring<a class="anchor" aria-label="anchor" href="#pattern-2-event-dates-with-censoring"></a>
</h3>
<p>Survival analysis requires:</p>
<ol type="1">
<li>
<strong>Index date</strong> (t=0, cohort entry)</li>
<li>
<strong>Event date</strong> (death, diagnosis) OR censoring date</li>
<li>
<strong>Follow-up end</strong> (administrative censoring)</li>
</ol>
<p><strong>Configuration pattern:</strong></p>
<p><strong>mock_data_config.csv:</strong></p>
<table class="table caption-top" style="width:100%;">
<colgroup>
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 10%">
<col style="width: 23%">
<col style="width: 25%">
<col style="width: 16%">
</colgroup>
<thead><tr class="header">
<th>uid</th>
<th>variable</th>
<th>role</th>
<th>variableType</th>
<th>variableLabel</th>
<th>position</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>index_date_v1</td>
<td>index_date</td>
<td>index-date;enabled</td>
<td>Continuous</td>
<td>Cohort entry</td>
<td>1</td>
</tr>
<tr class="even">
<td>death_date_v1</td>
<td>death_date</td>
<td>outcome-date;enabled</td>
<td>Continuous</td>
<td>Death or censoring date</td>
<td>2</td>
</tr>
</tbody>
</table>
<p><strong>mock_data_config_details.csv:</strong></p>
<table class="table caption-top">
<colgroup>
<col style="width: 5%">
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 8%">
</colgroup>
<thead><tr class="header">
<th>uid</th>
<th>uid_detail</th>
<th>variable</th>
<th>recStart</th>
<th>recEnd</th>
<th>catLabel</th>
<th>date_start</th>
<th>date_end</th>
<th>rType</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>index_date_v1</td>
<td>index_date_v1_d1</td>
<td>index_date</td>
<td>NA</td>
<td>date_start</td>
<td>Start</td>
<td>2001-01-01</td>
<td></td>
<td>Date</td>
</tr>
<tr class="even">
<td>index_date_v1</td>
<td>index_date_v1_d2</td>
<td>index_date</td>
<td>NA</td>
<td>date_end</td>
<td>End</td>
<td></td>
<td>2005-12-31</td>
<td>Date</td>
</tr>
<tr class="odd">
<td>death_date_v1</td>
<td>death_date_v1_d1</td>
<td>death_date</td>
<td>NA</td>
<td>date_start</td>
<td>Start</td>
<td>2001-01-01</td>
<td></td>
<td>Date</td>
</tr>
<tr class="even">
<td>death_date_v1</td>
<td>death_date_v1_d2</td>
<td>death_date</td>
<td>NA</td>
<td>date_end</td>
<td>End</td>
<td></td>
<td>2025-12-31</td>
<td>Date</td>
</tr>
</tbody>
</table>
<p><strong>Important:</strong> <code>death_date</code> range extends beyond accrual (2001-2025) to allow for follow-up time.</p>
<p>After generation, calculate:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Time-to-event (days)</span></span>
<span><span class="va">time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">death_date</span>, <span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span>, units <span class="op">=</span> <span class="st">"days"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Event indicator (1 = death, 0 = censored)</span></span>
<span><span class="co"># In real data, you'd have a separate event_type variable</span></span>
<span><span class="co"># For mock data, assume all events within study period are deaths</span></span>
<span><span class="va">event</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">death_date</span> <span class="op">&lt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2020-12-31"</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add to dataset</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">time</span> <span class="op">&lt;-</span> <span class="va">time</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">event</span> <span class="op">&lt;-</span> <span class="va">event</span></span></code></pre></div>
<p><strong>See <a href="demport-example.html">DemPoRT example</a> for complete survival analysis setup.</strong></p>
</section><section class="level3"><h3 id="pattern-3-multiple-time-points">Pattern 3: Multiple time points<a class="anchor" aria-label="anchor" href="#pattern-3-multiple-time-points"></a>
</h3>
<p>Longitudinal studies with repeated measures:</p>
<p><strong>mock_data_config.csv:</strong></p>
<table class="table caption-top" style="width:100%;">
<colgroup>
<col style="width: 8%">
<col style="width: 16%">
<col style="width: 10%">
<col style="width: 23%">
<col style="width: 25%">
<col style="width: 16%">
</colgroup>
<thead><tr class="header">
<th>uid</th>
<th>variable</th>
<th>role</th>
<th>variableType</th>
<th>variableLabel</th>
<th>position</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>baseline_date_v1</td>
<td>baseline_date</td>
<td>index-date;enabled</td>
<td>Continuous</td>
<td>Baseline interview</td>
<td>1</td>
</tr>
<tr class="even">
<td>followup1_date_v1</td>
<td>followup1_date</td>
<td>followup-date;enabled</td>
<td>Continuous</td>
<td>6-month follow-up</td>
<td>2</td>
</tr>
<tr class="odd">
<td>followup2_date_v1</td>
<td>followup2_date</td>
<td>followup-date;enabled</td>
<td>Continuous</td>
<td>12-month follow-up</td>
<td>3</td>
</tr>
</tbody>
</table>
<p><strong>mock_data_config_details.csv:</strong></p>
<table class="table caption-top">
<colgroup>
<col style="width: 5%">
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 9%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 11%">
<col style="width: 8%">
</colgroup>
<thead><tr class="header">
<th>uid</th>
<th>uid_detail</th>
<th>variable</th>
<th>recStart</th>
<th>recEnd</th>
<th>catLabel</th>
<th>date_start</th>
<th>date_end</th>
<th>rType</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>baseline_date_v1</td>
<td>baseline_date_v1_d1</td>
<td>baseline_date</td>
<td>NA</td>
<td>date_start</td>
<td>Start</td>
<td>2010-01-01</td>
<td></td>
<td>Date</td>
</tr>
<tr class="even">
<td>baseline_date_v1</td>
<td>baseline_date_v1_d2</td>
<td>baseline_date</td>
<td>NA</td>
<td>date_end</td>
<td>End</td>
<td></td>
<td>2012-12-31</td>
<td>Date</td>
</tr>
<tr class="odd">
<td>followup1_date_v1</td>
<td>followup1_date_v1_d1</td>
<td>followup1_date</td>
<td>NA</td>
<td>date_start</td>
<td>Start</td>
<td>2010-07-01</td>
<td></td>
<td>Date</td>
</tr>
<tr class="even">
<td>followup1_date_v1</td>
<td>followup1_date_v1_d2</td>
<td>followup1_date</td>
<td>NA</td>
<td>date_end</td>
<td>End</td>
<td></td>
<td>2013-06-30</td>
<td>Date</td>
</tr>
<tr class="odd">
<td>followup2_date_v1</td>
<td>followup2_date_v1_d1</td>
<td>followup2_date</td>
<td>NA</td>
<td>date_start</td>
<td>Start</td>
<td>2011-01-01</td>
<td></td>
<td>Date</td>
</tr>
<tr class="even">
<td>followup2_date_v1</td>
<td>followup2_date_v1_d2</td>
<td>followup2_date</td>
<td>NA</td>
<td>date_end</td>
<td>End</td>
<td></td>
<td>2013-12-31</td>
<td>Date</td>
</tr>
</tbody>
</table>
<p><strong>Post-processing:</strong> Ensure proper temporal ordering:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># After generation, you may need to adjust follow-up dates</span></span>
<span><span class="co"># to ensure they occur after baseline (MockData generates independently)</span></span>
<span></span>
<span><span class="co"># Example: Add fixed intervals to baseline</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">followup1_date</span> <span class="op">&lt;-</span> <span class="va">mock_data</span><span class="op">$</span><span class="va">baseline_date</span> <span class="op">+</span> <span class="fl">180</span>  <span class="co"># +6 months</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">followup2_date</span> <span class="op">&lt;-</span> <span class="va">mock_data</span><span class="op">$</span><span class="va">baseline_date</span> <span class="op">+</span> <span class="fl">365</span>  <span class="co"># +12 months</span></span></code></pre></div>
<p><strong>Note:</strong> MockData generates each date variable independently. For dependent dates (e.g., follow-up must be after baseline), generate the anchor date (baseline) in MockData, then calculate derived dates in your code.</p>
</section><section class="level3"><h3 id="pattern-4-missing-event-dates">Pattern 4: Missing event dates<a class="anchor" aria-label="anchor" href="#pattern-4-missing-event-dates"></a>
</h3>
<p>Not all participants have events (e.g., not everyone dies during follow-up):</p>
<p><strong>Approach:</strong> Date variables in v0.2 don’t support missing data patterns directly. Instead:</p>
<ol type="1">
<li>Generate all dates in valid range</li>
<li>Add separate indicator variable for event occurrence</li>
<li>Set event dates to NA for non-events in post-processing</li>
</ol>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Configuration</span></span>
<span><span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"index_date_v1"</span>, <span class="st">"death_date_v1"</span>, <span class="st">"death_occurred_v1"</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"index_date"</span>, <span class="st">"death_date"</span>, <span class="st">"death_occurred"</span><span class="op">)</span>,</span>
<span>  role <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"index-date,enabled"</span>, <span class="st">"outcome-date,enabled"</span>, <span class="st">"enabled"</span><span class="op">)</span>,</span>
<span>  variableType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Continuous"</span>, <span class="st">"Continuous"</span>, <span class="st">"Categorical"</span><span class="op">)</span>,</span>
<span>  position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"index_date_v1"</span>, <span class="st">"index_date_v1"</span>,</span>
<span>          <span class="st">"death_date_v1"</span>, <span class="st">"death_date_v1"</span>,</span>
<span>          <span class="st">"death_occurred_v1"</span>, <span class="st">"death_occurred_v1"</span><span class="op">)</span>,</span>
<span>  uid_detail <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"index_date_v1_d1"</span>, <span class="st">"index_date_v1_d2"</span>,</span>
<span>                 <span class="st">"death_date_v1_d1"</span>, <span class="st">"death_date_v1_d2"</span>,</span>
<span>                 <span class="st">"death_occurred_v1_d1"</span>, <span class="st">"death_occurred_v1_d2"</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"index_date"</span>, <span class="st">"index_date"</span>,</span>
<span>               <span class="st">"death_date"</span>, <span class="st">"death_date"</span>,</span>
<span>               <span class="st">"death_occurred"</span>, <span class="st">"death_occurred"</span><span class="op">)</span>,</span>
<span>  recStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"0"</span>, <span class="st">"1"</span><span class="op">)</span>,</span>
<span>  recEnd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date_start"</span>, <span class="st">"date_end"</span>, <span class="st">"date_start"</span>, <span class="st">"date_end"</span>, <span class="st">"0"</span>, <span class="st">"1"</span><span class="op">)</span>,</span>
<span>  catLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Start"</span>, <span class="st">"End"</span>, <span class="st">"Start"</span>, <span class="st">"End"</span>, <span class="st">"No"</span>, <span class="st">"Yes"</span><span class="op">)</span>,</span>
<span>  date_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2001-01-01"</span>, <span class="cn">NA</span>, <span class="st">"2001-01-01"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  date_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"2017-03-31"</span>, <span class="cn">NA</span>, <span class="st">"2025-12-31"</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  proportion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">0.70</span>, <span class="fl">0.30</span><span class="op">)</span>,</span>
<span>  rType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"Date"</span>, <span class="st">"Date"</span>, <span class="st">"Date"</span>, <span class="st">"factor"</span>, <span class="st">"factor"</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Write to temporary files</span></span>
<span><span class="va">temp_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">config_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_dir</span>, <span class="st">"missing_events_config.csv"</span><span class="op">)</span></span>
<span><span class="va">details_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_dir</span>, <span class="st">"missing_events_details.csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">config</span>, <span class="va">config_path</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">details</span>, <span class="va">details_path</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate</span></span>
<span><span class="va">mock_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="va">config_path</span>,</span>
<span>  details_path <span class="op">=</span> <span class="va">details_path</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set death_date to NA for non-deaths</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">death_date</span><span class="op">[</span><span class="va">mock_data</span><span class="op">$</span><span class="va">death_occurred</span> <span class="op">==</span> <span class="fl">0</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span></span>
<span><span class="co"># Check result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">death_date</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Should be ~70% NA</span></span></code></pre></div>
</section></section><section class="level2"><h2 id="date-ranges-and-distributions">Date ranges and distributions<a class="anchor" aria-label="anchor" href="#date-ranges-and-distributions"></a>
</h2>
<section class="level3"><h3 id="uniform-distribution-default">Uniform distribution (default)<a class="anchor" aria-label="anchor" href="#uniform-distribution-default"></a>
</h3>
<p>MockData generates dates uniformly across the range:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># All dates equally likely between start and end</span></span></code></pre></div>
<p><strong>Use cases:</strong></p>
<ul>
<li>Cohort accrual with constant enrollment</li>
<li>Administrative dates without seasonal patterns</li>
<li>General-purpose test data</li>
</ul></section><section class="level3"><h3 id="non-uniform-distributions">Non-uniform distributions<a class="anchor" aria-label="anchor" href="#non-uniform-distributions"></a>
</h3>
<p>MockData currently only supports uniform date distributions. For non-uniform patterns:</p>
<p><strong>Option 1:</strong> Generate uniform, then transform</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate uniform dates</span></span>
<span><span class="va">mock_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span><span class="va">config</span>, <span class="va">details</span>, n <span class="op">=</span> <span class="fl">1000</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Transform to exponential distribution (early enrollment peak)</span></span>
<span><span class="va">date_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span><span class="op">)</span>,</span>
<span>  units <span class="op">=</span> <span class="st">"days"</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert to exponential (more early dates)</span></span>
<span><span class="co"># This is a post-processing transformation</span></span>
<span><span class="va">uniform_props</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="va">date_range</span></span>
<span><span class="va">exp_props</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">uniform_props</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Shape parameter = 2</span></span>
<span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_date_exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">exp_props</span> <span class="op">*</span> <span class="va">date_range</span><span class="op">)</span></span></code></pre></div>
<p><strong>Option 2:</strong> Use DemPoRT patterns</p>
<p>The <a href="demport-example.html">DemPoRT example</a> demonstrates realistic temporal patterns for cohort studies, including:</p>
<ul>
<li>Staggered accrual periods</li>
<li>Age-dependent event rates</li>
<li>Administrative censoring</li>
<li>Loss to follow-up patterns</li>
</ul></section></section><section class="level2"><h2 id="data-quality-for-dates">Data quality for dates<a class="anchor" aria-label="anchor" href="#data-quality-for-dates"></a>
</h2>
<section class="level3"><h3 id="future-dates-corrupt_future">Future dates (corrupt_future)<a class="anchor" aria-label="anchor" href="#future-dates-corrupt_future"></a>
</h3>
<p>Simulate data entry errors where dates are in the future:</p>
<table class="table caption-top" style="width:100%;">
<colgroup>
<col style="width: 5%">
<col style="width: 12%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 7%">
</colgroup>
<thead><tr class="header">
<th>uid</th>
<th>uid_detail</th>
<th>variable</th>
<th>recStart</th>
<th>recEnd</th>
<th>catLabel</th>
<th>date_start</th>
<th>date_end</th>
<th>proportion</th>
<th>rType</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>birth_date_v1</td>
<td>birth_date_v1_d1</td>
<td>birth_date</td>
<td>NA</td>
<td>date_start</td>
<td>Start</td>
<td>1950-01-01</td>
<td></td>
<td>0.98</td>
<td>Date</td>
</tr>
<tr class="even">
<td>birth_date_v1</td>
<td>birth_date_v1_d2</td>
<td>birth_date</td>
<td>NA</td>
<td>date_end</td>
<td>End</td>
<td></td>
<td>2010-12-31</td>
<td>0.98</td>
<td>Date</td>
</tr>
<tr class="odd">
<td>birth_date_v1</td>
<td>birth_date_v1_d3</td>
<td>birth_date</td>
<td>[2026-01-01;2030-12-31]</td>
<td>corrupt_future</td>
<td>Future</td>
<td></td>
<td></td>
<td>0.02</td>
<td>Date</td>
</tr>
</tbody>
</table>
<p><strong>Result:</strong> 2% of birth dates will be in the future (impossible).</p>
<p><strong>Note:</strong> Date variables with garbage need both the valid range (date_start/date_end) rows AND the garbage row with proportion specified.</p>
</section><section class="level3"><h3 id="past-dates-corrupt_past">Past dates (corrupt_past)<a class="anchor" aria-label="anchor" href="#past-dates-corrupt_past"></a>
</h3>
<p>Simulate impossibly old dates:</p>
<table class="table caption-top" style="width:100%;">
<colgroup>
<col style="width: 5%">
<col style="width: 12%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 10%">
<col style="width: 12%">
<col style="width: 7%">
</colgroup>
<thead><tr class="header">
<th>uid</th>
<th>uid_detail</th>
<th>variable</th>
<th>recStart</th>
<th>recEnd</th>
<th>catLabel</th>
<th>date_start</th>
<th>date_end</th>
<th>proportion</th>
<th>rType</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>diagnosis_date_v1</td>
<td>diagnosis_date_v1_d1</td>
<td>diagnosis_date</td>
<td>NA</td>
<td>date_start</td>
<td>Start</td>
<td>2000-01-01</td>
<td></td>
<td>0.97</td>
<td>Date</td>
</tr>
<tr class="even">
<td>diagnosis_date_v1</td>
<td>diagnosis_date_v1_d2</td>
<td>diagnosis_date</td>
<td>NA</td>
<td>date_end</td>
<td>End</td>
<td></td>
<td>2020-12-31</td>
<td>0.97</td>
<td>Date</td>
</tr>
<tr class="odd">
<td>diagnosis_date_v1</td>
<td>diagnosis_date_v1_d3</td>
<td>diagnosis_date</td>
<td>[1850-01-01;1900-12-31]</td>
<td>corrupt_past</td>
<td>Too old</td>
<td></td>
<td></td>
<td>0.03</td>
<td>Date</td>
</tr>
</tbody>
</table>
<p><strong>Result:</strong> 3% of diagnosis dates will be 1850-1900 (unrealistic for modern data).</p>
</section><section class="level3"><h3 id="use-cases-for-garbage-dates">Use cases for garbage dates<a class="anchor" aria-label="anchor" href="#use-cases-for-garbage-dates"></a>
</h3>
<ul>
<li>
<strong>Testing validation pipelines:</strong> Ensure your code catches impossible dates</li>
<li>
<strong>Training analysts:</strong> Show examples of real-world data quality issues</li>
<li>
<strong>Data cleaning scripts:</strong> Test date range checks and filtering logic</li>
</ul></section></section><section class="level2"><h2 id="calculating-derived-temporal-variables">Calculating derived temporal variables<a class="anchor" aria-label="anchor" href="#calculating-derived-temporal-variables"></a>
</h2>
<p>After generating dates, calculate common derived variables:</p>
<section class="level3"><h3 id="age-at-event">Age at event<a class="anchor" aria-label="anchor" href="#age-at-event"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assuming you have birth_date and index_date</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">age_at_index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span>, <span class="va">mock_data</span><span class="op">$</span><span class="va">birth_date</span>, units <span class="op">=</span> <span class="st">"days"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">/</span> <span class="fl">365.25</span></span>
<span></span>
<span><span class="co"># Or using lubridate</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">age_at_index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/time_length.html" class="external-link">time_length</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html" class="external-link">interval</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">birth_date</span>, <span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span><span class="op">)</span>,</span>
<span>  <span class="st">"years"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</section><section class="level3"><h3 id="follow-up-time">Follow-up time<a class="anchor" aria-label="anchor" href="#follow-up-time"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Time from index to event/censoring</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">followup_years</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">death_date</span>, <span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span>, units <span class="op">=</span> <span class="st">"days"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">/</span> <span class="fl">365.25</span></span></code></pre></div>
</section><section class="level3"><h3 id="calendar-year">Calendar year<a class="anchor" aria-label="anchor" href="#calendar-year"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract year for period analysis</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span>, <span class="st">"%Y"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Fiscal year (Canada: April 1 - March 31)</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">fiscal_year</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span>, <span class="st">"%m"</span><span class="op">)</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="fl">4</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span>, <span class="st">"%Y"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span>, <span class="st">"%Y"</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
</section><section class="level3"><h3 id="time-to-event-indicators">Time-to-event indicators<a class="anchor" aria-label="anchor" href="#time-to-event-indicators"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Event occurred within study period</span></span>
<span><span class="va">study_end</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2020-12-31"</span><span class="op">)</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">event</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>  <span class="va">mock_data</span><span class="op">$</span><span class="va">death_date</span> <span class="op">&lt;=</span> <span class="va">study_end</span>,</span>
<span>  <span class="fl">1</span>,  <span class="co"># Event occurred</span></span>
<span>  <span class="fl">0</span>   <span class="co"># Censored</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Time to event or censoring</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">death_date</span>, <span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span>, units <span class="op">=</span> <span class="st">"days"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">difftime</a></span><span class="op">(</span><span class="va">study_end</span>, <span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span>, units <span class="op">=</span> <span class="st">"days"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</section></section><section class="level2"><h2 id="best-practices">Best practices<a class="anchor" aria-label="anchor" href="#best-practices"></a>
</h2>
<section class="level3"><h3 id="start-with-indexbaseline-date">1. Start with index/baseline date<a class="anchor" aria-label="anchor" href="#start-with-indexbaseline-date"></a>
</h3>
<p>Generate the anchor date first, then calculate dependent dates:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate baseline date with MockData</span></span>
<span><span class="va">baseline_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="st">"baseline_date_v1"</span>,</span>
<span>  variable <span class="op">=</span> <span class="st">"baseline_date"</span>,</span>
<span>  role <span class="op">=</span> <span class="st">"index-date,enabled"</span>,</span>
<span>  variableType <span class="op">=</span> <span class="st">"Continuous"</span>,</span>
<span>  position <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">baseline_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  uid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"baseline_date_v1"</span>, <span class="st">"baseline_date_v1"</span><span class="op">)</span>,</span>
<span>  uid_detail <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"baseline_date_v1_d1"</span>, <span class="st">"baseline_date_v1_d2"</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"baseline_date"</span>, <span class="st">"baseline_date"</span><span class="op">)</span>,</span>
<span>  recStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  recEnd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date_start"</span>, <span class="st">"date_end"</span><span class="op">)</span>,</span>
<span>  catLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Start"</span>, <span class="st">"End"</span><span class="op">)</span>,</span>
<span>  date_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2010-01-01"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  date_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"2015-12-31"</span><span class="op">)</span>,</span>
<span>  rType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Date"</span>, <span class="st">"Date"</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Write to temporary files</span></span>
<span><span class="va">temp_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">config_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_dir</span>, <span class="st">"baseline_config.csv"</span><span class="op">)</span></span>
<span><span class="va">details_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_dir</span>, <span class="st">"baseline_details.csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">baseline_config</span>, <span class="va">config_path</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">baseline_details</span>, <span class="va">details_path</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate baseline dates</span></span>
<span><span class="va">mock_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="va">config_path</span>,</span>
<span>  details_path <span class="op">=</span> <span class="va">details_path</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate dependent dates</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">followup_date</span> <span class="op">&lt;-</span> <span class="va">mock_data</span><span class="op">$</span><span class="va">baseline_date</span> <span class="op">+</span> <span class="fl">365</span>  <span class="co"># +1 year</span></span>
<span><span class="va">mock_data</span><span class="op">$</span><span class="va">death_date</span> <span class="op">&lt;-</span> <span class="va">mock_data</span><span class="op">$</span><span class="va">baseline_date</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">365</span><span class="op">:</span><span class="fl">3650</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>  <span class="co"># Random 1-10 years</span></span></code></pre></div>
</section><section class="level3"><h3 id="use-realistic-ranges">2. Use realistic ranges<a class="anchor" aria-label="anchor" href="#use-realistic-ranges"></a>
</h3>
<p>Match your date ranges to the study design:</p>
<ul>
<li>
<strong>Cohort studies:</strong> Accrual period + follow-up period</li>
<li>
<strong>Cross-sectional surveys:</strong> Survey fielding period</li>
<li>
<strong>Administrative data:</strong> Reporting period</li>
</ul></section><section class="level3"><h3 id="document-temporal-assumptions">3. Document temporal assumptions<a class="anchor" aria-label="anchor" href="#document-temporal-assumptions"></a>
</h3>
<p>Add notes to your configuration:</p>
<table class="table caption-top" style="width:100%;">
<colgroup>
<col style="width: 7%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 20%">
<col style="width: 22%">
<col style="width: 10%">
<col style="width: 14%">
</colgroup>
<thead><tr class="header">
<th>uid</th>
<th>variable</th>
<th>role</th>
<th>variableType</th>
<th>variableLabel</th>
<th>notes</th>
<th>position</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>index_date_v1</td>
<td>index_date</td>
<td>index-date;enabled</td>
<td>Continuous</td>
<td>Cohort entry</td>
<td>Accrual 2001-2005; uniform enrollment</td>
<td>1</td>
</tr>
<tr class="even">
<td>death_date_v1</td>
<td>death_date</td>
<td>outcome-date;enabled</td>
<td>Continuous</td>
<td>Death date</td>
<td>Follow-up through 2025-12-31</td>
<td>2</td>
</tr>
</tbody>
</table></section><section class="level3"><h3 id="validate-temporal-logic">4. Validate temporal logic<a class="anchor" aria-label="anchor" href="#validate-temporal-logic"></a>
</h3>
<p>After generation, check:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># No negative follow-up times</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">death_date</span> <span class="op">&gt;=</span> <span class="va">mock_data</span><span class="op">$</span><span class="va">index_date</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Events within expected range</span></span>
<span><span class="va">study_start</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2001-01-01"</span><span class="op">)</span></span>
<span><span class="va">study_end</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-12-31"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">death_date</span> <span class="op">&gt;=</span> <span class="va">study_start</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">mock_data</span><span class="op">$</span><span class="va">death_date</span> <span class="op">&lt;=</span> <span class="va">study_end</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</section></section><section class="level2"><h2 id="complete-example-cohort-study">Complete example: Cohort study<a class="anchor" aria-label="anchor" href="#complete-example-cohort-study"></a>
</h2>
<p>Here’s a complete configuration for a cohort study with temporal variables:</p>
<p><strong>See the <a href="demport-example.html">DemPoRT example</a></strong> for a comprehensive, production-ready implementation with:</p>
<ul>
<li>ICES date specifications</li>
<li>Realistic survival patterns</li>
<li>Administrative censoring</li>
<li>Multiple time-varying covariates</li>
<li>Complete survival analysis setup</li>
</ul>
<p>The DemPoRT example is the primary and most detailed demonstration of date variable generation in MockData.</p>
</section><section class="level2"><h2 id="key-concepts-summary">Key concepts summary<a class="anchor" aria-label="anchor" href="#key-concepts-summary"></a>
</h2>
<table class="table caption-top" style="width:100%;">
<colgroup>
<col style="width: 26%">
<col style="width: 46%">
<col style="width: 26%">
</colgroup>
<thead><tr class="header">
<th>Concept</th>
<th>Implementation</th>
<th>Details</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>Date ranges</strong></td>
<td>
<code>date_start</code> / <code>date_end</code> columns</td>
<td>ISO format: YYYY-MM-DD</td>
</tr>
<tr class="even">
<td><strong>Distribution</strong></td>
<td>Uniform only in v0.2</td>
<td>Transform after generation for non-uniform</td>
</tr>
<tr class="odd">
<td><strong>Missing dates</strong></td>
<td>Use indicator variable + post-processing</td>
<td>MockData doesn’t support NA proportions for dates</td>
</tr>
<tr class="even">
<td><strong>Derived dates</strong></td>
<td>Calculate from anchor date</td>
<td>E.g., follow-up = baseline + interval</td>
</tr>
<tr class="odd">
<td><strong>Garbage dates</strong></td>
<td>
<code>corrupt_future</code>, <code>corrupt_past</code>
</td>
<td>For data quality testing</td>
</tr>
<tr class="even">
<td><strong>Temporal ordering</strong></td>
<td>Validate after generation</td>
<td>Ensure logical date sequences</td>
</tr>
</tbody>
</table></section><section class="level2"><h2 id="what-you-learned">What you learned<a class="anchor" aria-label="anchor" href="#what-you-learned"></a>
</h2>
<p>In this tutorial, you learned:</p>
<ul>
<li>
<strong>Date configuration basics:</strong> How to specify date ranges and distributions in configuration files</li>
<li>
<strong>Common temporal patterns:</strong> Cohort accrual, event dates with censoring, multiple time points, and missing events</li>
<li>
<strong>Distribution options:</strong> Uniform, Gompertz, and exponential distributions for realistic temporal patterns</li>
<li>
<strong>Data quality testing:</strong> How to generate corrupt future/past dates for validation pipeline testing</li>
<li>
<strong>Derived temporal variables:</strong> Calculating age, follow-up time, calendar periods, and time-to-event indicators</li>
<li>
<strong>Best practices:</strong> Starting with index dates, using realistic ranges, documenting assumptions, and validating temporal logic</li>
</ul>
<p>For complete production-ready examples with survival analysis, see the <a href="demport-example.html">DemPoRT example</a>.</p>
</section><section class="level2"><h2 id="next-steps">Next steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<ul>
<li>
<strong>Complete working example:</strong> <a href="demport-example.html">DemPoRT example</a> - THE comprehensive date variable demonstration</li>
<li>
<strong>Configuration reference:</strong> <a href="reference-config.html">Configuration schema</a> - Complete date specification syntax</li>
<li>
<strong>Advanced topics:</strong> <a href="advanced-topics.html">Advanced topics</a> - Technical details on date generation internals</li>
</ul></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>
Developed by Juan Li and recodeflow contributors.
</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
