<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting started with MockData • MockData</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="getting-started_files/libs/quarto-html/popper.min.js"></script><script src="getting-started_files/libs/quarto-html/tippy.umd.min.js"></script><link href="getting-started_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="getting-started_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Getting started with MockData">
<link rel="stylesheet" href="extra.css">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MockData</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting started with MockData</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-config-files.html">Generating datasets from configuration files</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-dates.html">Working with date variables</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-missing-data.html">Missing data in health surveys</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-garbage-data.html">Generating garbage data for validation testing</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>How-to guides</h6></li>
    <li><a class="dropdown-item" href="../articles/cchs-example.html">CCHS example</a></li>
    <li><a class="dropdown-item" href="../articles/chms-example.html">CHMS example</a></li>
    <li><a class="dropdown-item" href="../articles/demport-example.html">DemPoRT example: Survival analysis workflow</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Explanation</h6></li>
    <li><a class="dropdown-item" href="../articles/dates.html">Date variables and temporal data</a></li>
    <li><a class="dropdown-item" href="../articles/advanced-topics.html">Advanced topics</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Reference</h6></li>
    <li><a class="dropdown-item" href="../articles/reference-config.html">Configuration reference</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Big-Life-Lab/MockData/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting started with MockData</h1>




      <small class="dont-index">Source: <a href="https://github.com/Big-Life-Lab/MockData/blob/create-date-var/vignettes/getting-started.qmd" class="external-link"><code>vignettes/getting-started.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <div>
<blockquote>
<p><strong>About this vignette</strong></p>
<p>This introductory tutorial teaches core MockData concepts through progressive examples. All code runs during vignette build to ensure accuracy. The generated data are for testing and development only—not for modelling or analysis.</p>
</blockquote>
</div>
<section class="level2"><h2 id="what-is-mockdata">What is MockData?<a class="anchor" aria-label="anchor" href="#what-is-mockdata"></a>
</h2>
<p>MockData generates metadata-driven mock datasets for testing and developing harmonisation workflows. Mock data are created solely from variable specifications and contain <strong>no real person-level data</strong> or identifiable information.</p>
<section class="level3"><h3 id="key-purposes">Key purposes<a class="anchor" aria-label="anchor" href="#key-purposes"></a>
</h3>
<ul>
<li>
<strong>Testing harmonisation code</strong> (cchsflow, chmsflow) without access to real survey data</li>
<li>
<strong>Developing data pipelines</strong> with realistic variable structures before data access</li>
<li>
<strong>Training and education</strong> with representative but non-sensitive data</li>
<li>
<strong>Validating data processing</strong> workflows with controlled test inputs</li>
</ul></section><section class="level3"><h3 id="what-mock-data-are-and-are-not">What mock data are (and are not)<a class="anchor" aria-label="anchor" href="#what-mock-data-are-and-are-not"></a>
</h3>
<p>MockData reads recodeflow metadata files (<code>variables.csv</code>, <code>variable-details.csv</code>) to generate data that mimics the variable structure of health survey datasets like CCHS and CHMS. The data have appropriate types, value ranges, and category labels—but <strong>no real-world statistical relationships</strong>.</p>
<p><strong>Limitations</strong>: While variable types and ranges match the metadata, joint distributions and correlations may differ significantly from real-world data. Mock data should never be used for population inference, epidemiological modelling, or research publication.</p>
</section></section><section class="level2"><h2 id="your-first-mock-dataset">Your first mock dataset<a class="anchor" aria-label="anchor" href="#your-first-mock-dataset"></a>
</h2>
<p>This tutorial walks you through generating a simple mock dataset with both categorical and continuous variables.</p>
<section class="level3"><h3 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="level3"><h3 id="step-1-prepare-metadata">Step 1: Prepare metadata<a class="anchor" aria-label="anchor" href="#step-1-prepare-metadata"></a>
</h3>
<p>MockData uses two metadata tables:</p>
<ol type="1">
<li>
<strong>variables</strong>: defines which variables exist in each database cycle</li>
<li>
<strong>variable_details</strong>: defines categories, ranges, and recode rules</li>
</ol>
<p>For this tutorial, we’ll use a simple example with two variables: smoking status (categorical) and age (continuous) .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define variables table</span></span>
<span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"smoking"</span>, <span class="st">"smoking"</span>, <span class="st">"age"</span>, <span class="st">"age"</span><span class="op">)</span>,</span>
<span>  variableStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SMK_01"</span>, <span class="st">"SMK_01"</span>, <span class="st">"AGE_01"</span>, <span class="st">"AGE_01"</span><span class="op">)</span>,</span>
<span>  databaseStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cycle1"</span>, <span class="st">"cycle2"</span>, <span class="st">"cycle1"</span>, <span class="st">"cycle2"</span><span class="op">)</span>,</span>
<span>  databaseEnd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cycle1"</span>, <span class="st">"cycle2"</span>, <span class="st">"cycle1"</span>, <span class="st">"cycle2"</span><span class="op">)</span>,</span>
<span>  variableType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"categorical"</span>, <span class="st">"categorical"</span>, <span class="st">"continuous"</span>, <span class="st">"continuous"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define variable details (categories and ranges)</span></span>
<span><span class="va">variable_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"smoking"</span>, <span class="st">"smoking"</span>, <span class="st">"smoking"</span>,</span>
<span>               <span class="st">"smoking"</span>, <span class="st">"smoking"</span>, <span class="st">"smoking"</span>, <span class="st">"smoking"</span>,</span>
<span>               <span class="st">"age"</span>, <span class="st">"age"</span>, <span class="st">"age"</span><span class="op">)</span>,</span>
<span>  recStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"996"</span>, <span class="st">"997"</span>, <span class="st">"998"</span>, <span class="st">"999"</span>,</span>
<span>               <span class="st">"[18, 100]"</span>, <span class="st">"996"</span>, <span class="st">"[997, 999]"</span><span class="op">)</span>,</span>
<span>  recEnd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"996"</span>, <span class="st">"997"</span>, <span class="st">"998"</span>, <span class="st">"999"</span>,</span>
<span>             <span class="st">"copy"</span>, <span class="st">"NA::a"</span>, <span class="st">"NA::b"</span><span class="op">)</span>,</span>
<span>  catLabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Daily smoker"</span>, <span class="st">"Occasional smoker"</span>, <span class="st">"Never smoked"</span>,</span>
<span>               <span class="st">"Not applicable"</span>, <span class="st">"Don't know"</span>, <span class="st">"Refusal"</span>, <span class="st">"Not stated"</span>,</span>
<span>               <span class="st">"Age in years"</span>, <span class="st">"Not applicable"</span>, <span class="st">"Missing"</span><span class="op">)</span>,</span>
<span>  variableStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SMK_01"</span>, <span class="st">"SMK_01"</span>, <span class="st">"SMK_01"</span>, <span class="st">"SMK_01"</span>, <span class="st">"SMK_01"</span>, <span class="st">"SMK_01"</span>, <span class="st">"SMK_01"</span>,</span>
<span>                    <span class="st">"AGE_01"</span>, <span class="st">"AGE_01"</span>, <span class="st">"AGE_01"</span><span class="op">)</span>,</span>
<span>  databaseStart <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cycle1"</span>, <span class="st">"cycle1"</span>, <span class="st">"cycle1"</span>, <span class="st">"cycle1"</span>, <span class="st">"cycle1"</span>, <span class="st">"cycle1"</span>, <span class="st">"cycle1"</span>,</span>
<span>                    <span class="st">"cycle1"</span>, <span class="st">"cycle1"</span>, <span class="st">"cycle1"</span><span class="op">)</span>,</span>
<span>  rType <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"factor"</span>, <span class="st">"factor"</span>, <span class="st">"factor"</span>, <span class="st">"factor"</span>, <span class="st">"factor"</span>, <span class="st">"factor"</span>, <span class="st">"factor"</span>,</span>
<span>            <span class="st">"integer"</span>, <span class="st">"integer"</span>, <span class="st">"integer"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Variables table</strong> (4 rows):</p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<thead><tr class="header">
<th style="text-align: left;">variable</th>
<th style="text-align: left;">variableStart</th>
<th style="text-align: left;">databaseStart</th>
<th style="text-align: left;">databaseEnd</th>
<th style="text-align: left;">variableType</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">SMK_01</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">categorical</td>
</tr>
<tr class="even">
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">SMK_01</td>
<td style="text-align: left;">cycle2</td>
<td style="text-align: left;">cycle2</td>
<td style="text-align: left;">categorical</td>
</tr>
<tr class="odd">
<td style="text-align: left;">age</td>
<td style="text-align: left;">AGE_01</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">continuous</td>
</tr>
<tr class="even">
<td style="text-align: left;">age</td>
<td style="text-align: left;">AGE_01</td>
<td style="text-align: left;">cycle2</td>
<td style="text-align: left;">cycle2</td>
<td style="text-align: left;">continuous</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Variable details table</strong> (10 rows):</p>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top">
<colgroup>
<col style="width: 11%">
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 22%">
<col style="width: 17%">
<col style="width: 17%">
<col style="width: 9%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">variable</th>
<th style="text-align: left;">recStart</th>
<th style="text-align: left;">recEnd</th>
<th style="text-align: left;">catLabel</th>
<th style="text-align: left;">variableStart</th>
<th style="text-align: left;">databaseStart</th>
<th style="text-align: left;">rType</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">Daily smoker</td>
<td style="text-align: left;">SMK_01</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="even">
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">2</td>
<td style="text-align: left;">Occasional smoker</td>
<td style="text-align: left;">SMK_01</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="odd">
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">3</td>
<td style="text-align: left;">Never smoked</td>
<td style="text-align: left;">SMK_01</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="even">
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">996</td>
<td style="text-align: left;">996</td>
<td style="text-align: left;">Not applicable</td>
<td style="text-align: left;">SMK_01</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="odd">
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">997</td>
<td style="text-align: left;">997</td>
<td style="text-align: left;">Don’t know</td>
<td style="text-align: left;">SMK_01</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="even">
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">998</td>
<td style="text-align: left;">998</td>
<td style="text-align: left;">Refusal</td>
<td style="text-align: left;">SMK_01</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="odd">
<td style="text-align: left;">smoking</td>
<td style="text-align: left;">999</td>
<td style="text-align: left;">999</td>
<td style="text-align: left;">Not stated</td>
<td style="text-align: left;">SMK_01</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">factor</td>
</tr>
<tr class="even">
<td style="text-align: left;">age</td>
<td style="text-align: left;">[18, 100]</td>
<td style="text-align: left;">copy</td>
<td style="text-align: left;">Age in years</td>
<td style="text-align: left;">AGE_01</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">integer</td>
</tr>
<tr class="odd">
<td style="text-align: left;">age</td>
<td style="text-align: left;">996</td>
<td style="text-align: left;">NA::a</td>
<td style="text-align: left;">Not applicable</td>
<td style="text-align: left;">AGE_01</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">integer</td>
</tr>
<tr class="even">
<td style="text-align: left;">age</td>
<td style="text-align: left;">[997, 999]</td>
<td style="text-align: left;">NA::b</td>
<td style="text-align: left;">Missing</td>
<td style="text-align: left;">AGE_01</td>
<td style="text-align: left;">cycle1</td>
<td style="text-align: left;">integer</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section class="level3"><h3 id="step-2-generate-a-categorical-variable-with-custom-proportions">Step 2: Generate a categorical variable with custom proportions<a class="anchor" aria-label="anchor" href="#step-2-generate-a-categorical-variable-with-custom-proportions"></a>
</h3>
<p>Real survey data has different types of missing values. Use the <code>proportions</code> parameter to explicitly specify the distribution for all categories, including missing codes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create mock data frame</span></span>
<span><span class="va">df_mock</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate smoking variable with explicit proportions for ALL categories</span></span>
<span><span class="va">smoking_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_cat_var.html">create_cat_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"SMK_01"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"cycle1"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  variables <span class="op">=</span> <span class="va">variables</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="va">df_mock</span>,</span>
<span>  proportions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">"1"</span> <span class="op">=</span> <span class="fl">0.30</span>,   <span class="co"># Daily smoker</span></span>
<span>    <span class="st">"2"</span> <span class="op">=</span> <span class="fl">0.50</span>,   <span class="co"># Occasional smoker</span></span>
<span>    <span class="st">"3"</span> <span class="op">=</span> <span class="fl">0.15</span>,   <span class="co"># Never smoked</span></span>
<span>    <span class="st">"996"</span> <span class="op">=</span> <span class="fl">0.01</span>, <span class="co"># Not applicable (valid skip)</span></span>
<span>    <span class="st">"997"</span> <span class="op">=</span> <span class="fl">0.01</span>, <span class="co"># Don't know</span></span>
<span>    <span class="st">"998"</span> <span class="op">=</span> <span class="fl">0.02</span>, <span class="co"># Refusal</span></span>
<span>    <span class="st">"999"</span> <span class="op">=</span> <span class="fl">0.01</span>  <span class="co"># Not stated</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add to data frame</span></span>
<span><span class="va">df_mock</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">df_mock</span>, <span class="va">smoking_col</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View distribution</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">df_mock</span><span class="op">$</span><span class="va">SMK_01</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  1   2   3 996 997 998 999
312 472 156   7  13  32   8 </code></pre>
</div>
</div>
<p><strong>What happened:</strong></p>
<ul>
<li>MockData extracted all 7 categories from variable_details (1, 2, 3, 996, 997, 998, 999)</li>
<li>Generated 1000 random values distributed according to the specified proportions</li>
<li>The <code>proportions</code> parameter gives you full control over the distribution, including missing data codes</li>
<li>Categories 1-3 are valid responses, while 996-999 are different types of missing data</li>
</ul>
<p>For further discussion on making mock missing data see <a href="missing-data.html">Missing data in health surveys</a>.</p>
</section><section class="level3"><h3 id="step-3-generate-continuous-variable">Step 3: Generate continuous variable<a class="anchor" aria-label="anchor" href="#step-3-generate-continuous-variable"></a>
</h3>
<p>Use <code><a href="../reference/create_con_var.html">create_con_var()</a></code> to generate continuous variables like age.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate age variable</span></span>
<span><span class="va">age_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_con_var.html">create_con_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"AGE_01"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"cycle1"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  variables <span class="op">=</span> <span class="va">variables</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="va">df_mock</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"uniform"</span>  <span class="co"># Uniform distribution within range [18, 100]</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add to data frame</span></span>
<span><span class="va">df_mock</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">df_mock</span>, <span class="va">age_col</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df_mock</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   id SMK_01 AGE_01
1   1      3     38
2   2      1     77
3   3      2     52
4   4      2     40
5   5      2     94
6   6      1     38
7   7      1     59
8   8      3     59
9   9      2     70
10 10      2     69</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df_mock</span><span class="op">$</span><span class="va">AGE_01</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
  18.00   40.00   63.50   60.93   79.25   99.00 </code></pre>
</div>
</div>
<p><strong>What happened:</strong></p>
<ul>
<li>MockData extracted the range from variable_details [18, 100]</li>
<li>Generated 100 random ages uniformly distributed between 18 and 100</li>
<li>Returned a single-column data frame that we added to df_mock</li>
</ul></section><section class="level3"><h3 id="step-4-working-with-configuration-files">Step 4: Working with configuration files<a class="anchor" aria-label="anchor" href="#step-4-working-with-configuration-files"></a>
</h3>
<p>For larger projects, MockData supports batch generation using configuration CSV files instead of inline data frames. This makes it easier to generate many variables at once.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read configuration files (not run in this tutorial)</span></span>
<span><span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_mock_data_config.html">read_mock_data_config</a></span><span class="op">(</span><span class="st">"mock_data_config.csv"</span><span class="op">)</span></span>
<span><span class="va">details</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_mock_data_config_details.html">read_mock_data_config_details</a></span><span class="op">(</span><span class="st">"mock_data_config_details.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate all variables in one call</span></span>
<span><span class="va">mock_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config <span class="op">=</span> <span class="va">config</span>,</span>
<span>  details <span class="op">=</span> <span class="va">details</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">123</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Why use config files:</strong></p>
<ul>
<li>Generate dozens of variables in a single call</li>
<li>Easier to maintain and version control metadata</li>
<li>Consistent with recodeflow harmonization workflows</li>
<li>Supports advanced features like derived variables and garbage data</li>
</ul>
<p>See <a href="cchs-example.html">CCHS example</a>, <a href="chms-example.html">CHMS example</a>, and <a href="demport-example.html">DemPoRT example</a> for real-world configuration file usage.</p>
</section><section class="level3"><h3 id="step-5-control-reproducibility-with-seeds">Step 5: Control reproducibility with seeds<a class="anchor" aria-label="anchor" href="#step-5-control-reproducibility-with-seeds"></a>
</h3>
<p>Use seeds to generate the same mock data every time.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set seed for reproducibility</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_mock</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_cat_var.html">create_cat_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"SMK_01"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"cycle1"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  variables <span class="op">=</span> <span class="va">variables</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="va">df_mock</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Reset seed</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df_mock</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_cat_var.html">create_cat_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"SMK_01"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"cycle1"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  variables <span class="op">=</span> <span class="va">variables</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="va">df_mock</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Verify identical</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">result1</span><span class="op">$</span><span class="va">SMK_01</span>, <span class="va">result2</span><span class="op">$</span><span class="va">SMK_01</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p><strong>Result:</strong> TRUE - same seed produces identical mock data</p>
</section><section class="level3"><h3 id="step-6-working-with-derived-variables">Step 6: Working with derived variables<a class="anchor" aria-label="anchor" href="#step-6-working-with-derived-variables"></a>
</h3>
<p>MockData generates <strong>raw variables</strong> (direct survey measurements). Derived variables should be calculated from the generated data using harmonization workflows.</p>
<p><strong>Conceptual workflow:</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Generate mock raw variables</span></span>
<span><span class="va">mock_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config <span class="op">=</span> <span class="va">config</span>,        <span class="co"># Includes height_raw, weight_raw</span></span>
<span>  details <span class="op">=</span> <span class="va">details</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">1000</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. Apply harmonization to create derived variables</span></span>
<span><span class="co"># (Requires cchsflow or recodeflow package)</span></span>
<span><span class="co"># library(cchsflow)</span></span>
<span><span class="co"># mock_data &lt;- rec_with_table(</span></span>
<span><span class="co">#   data = mock_data,</span></span>
<span><span class="co">#   variables = variables,</span></span>
<span><span class="co">#   variable_details = variable_details,</span></span>
<span><span class="co">#   database_name = "cchs2001"</span></span>
<span><span class="co"># )</span></span>
<span><span class="co"># Now mock_data includes derived variables like BMI_der, age categories, etc.</span></span></code></pre></div>
</div>
<p><strong>Why this approach:</strong></p>
<ul>
<li>Mirrors real data processing (derived variables computed during harmonization)</li>
<li>Allows testing harmonization logic with mock data</li>
<li>Keeps raw and derived variables separate</li>
<li>Tests the complete workflow: generate → harmonize → analyze</li>
</ul>
<p><strong>Common derived variables:</strong></p>
<ul>
<li>BMI categories from height and weight</li>
<li>Age categories from continuous age</li>
<li>Income quintiles from income</li>
<li>Health risk scores from multiple indicators</li>
</ul>
<p>See <a href="cchs-example.html">CCHS example</a> and <a href="demport-example.html">DemPoRT example</a> for complete workflows with derived variables.</p>
</section></section><section class="level2"><h2 id="what-you-learned">What you learned<a class="anchor" aria-label="anchor" href="#what-you-learned"></a>
</h2>
<p>In this tutorial, you learned:</p>
<ul>
<li>How to prepare metadata (variables and variable_details tables)</li>
<li>How to specify custom proportions for all categories including missing codes</li>
<li>The critical difference between valid skip (996) and other missing codes (997-999)</li>
<li>How to calculate prevalence correctly by handling missing codes appropriately</li>
<li>How to generate continuous variables with <code><a href="../reference/create_con_var.html">create_con_var()</a></code>
</li>
<li>How configuration files enable batch generation for larger projects</li>
<li>How to ensure reproducibility with seeds</li>
<li>How to work with derived variables through harmonization workflows</li>
</ul></section><section class="level2"><h2 id="next-steps">Next steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p><strong>Core topics:</strong></p>
<ul>
<li>
<a href="missing-data.html">Missing data</a> - Realistic missing data patterns in health surveys</li>
<li>
<a href="dates.html">Date variables</a> - Working with dates and survival times</li>
<li>
<a href="cchs-example.html#configuration-format">Configuration files</a> - Batch generation approach</li>
</ul>
<p><strong>Database-specific examples:</strong></p>
<ul>
<li>
<a href="cchs-example.html">CCHS example</a> - Canadian Community Health Survey</li>
<li>
<a href="chms-example.html">CHMS example</a> - Canadian Health Measures Survey</li>
<li>
<a href="demport-example.html">DemPoRT example</a> - Dementia Population Risk Tool</li>
</ul>
<p><strong>Advanced topics:</strong></p>
<ul>
<li>
<a href="cchs-example.html#garbage-data">Garbage data</a> - Simulating data quality issues</li>
<li>
<a href="advanced-topics.html">Advanced topics</a> - Technical details and performance</li>
</ul></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>
Developed by Juan Li and recodeflow contributors.
</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
