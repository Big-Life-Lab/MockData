<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Date variables and temporal data • MockData</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="dates_files/libs/quarto-html/popper.min.js"></script><script src="dates_files/libs/quarto-html/tippy.umd.min.js"></script><link href="dates_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="dates_files/libs/quarto-html/light-border.css" rel="stylesheet">
<!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Date variables and temporal data">
<link rel="stylesheet" href="extra.css">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MockData</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting started with MockData</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-config-files.html">Generating datasets from configuration files</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-dates.html">Working with date variables</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-missing-data.html">Missing data in health surveys</a></li>
    <li><a class="dropdown-item" href="../articles/tutorial-garbage-data.html">Generating garbage data for validation testing</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>How-to guides</h6></li>
    <li><a class="dropdown-item" href="../articles/cchs-example.html">CCHS example</a></li>
    <li><a class="dropdown-item" href="../articles/chms-example.html">CHMS example</a></li>
    <li><a class="dropdown-item" href="../articles/demport-example.html">DemPoRT example: Survival analysis workflow</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Explanation</h6></li>
    <li><a class="dropdown-item" href="../articles/dates.html">Date variables and temporal data</a></li>
    <li><a class="dropdown-item" href="../articles/advanced-topics.html">Advanced topics</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Reference</h6></li>
    <li><a class="dropdown-item" href="../articles/reference-config.html">Configuration reference</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Big-Life-Lab/MockData/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-quarto">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Date variables and temporal data</h1>




      <small class="dont-index">Source: <a href="https://github.com/Big-Life-Lab/MockData/blob/create-date-var/vignettes/dates.qmd" class="external-link"><code>vignettes/dates.qmd</code></a></small>
      <div class="d-none name"><code></code></div>
    </div>






    <div style="padding: 1em; background-color: #e3f2fd; border-left: 4px solid #2196F3; margin-bottom: 1em;">
<p><strong>About this vignette:</strong> This reference document provides comprehensive technical specifications for date variable generation. For step-by-step tutorials, see <a href="tutorial-dates.html">Working with date variables</a>.</p>
</div>
<section class="level2"><h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>MockData supports generating date variables for temporal analysis, including survival analysis and longitudinal studies. This vignette covers:</p>
<ul>
<li>Creating date variables from metadata</li>
<li>Distribution options for realistic temporal patterns</li>
<li>Simulating different source formats (CSV, SAS) for harmonization testing</li>
<li>Generating invalid dates for testing validation pipelines</li>
<li>Best practices for temporal mock data</li>
</ul></section><section class="level2"><h2 id="basic-date-generation">Basic date generation<a class="anchor" aria-label="anchor" href="#basic-date-generation"></a>
</h2>
<p>The <code><a href="../reference/create_date_var.html">create_date_var()</a></code> function generates date variables from SAS date format specifications in your metadata.</p>
<section class="level3"><h3 id="metadata-format">Metadata format<a class="anchor" aria-label="anchor" href="#metadata-format"></a>
</h3>
<p>Date ranges are specified in SAS date format in the <code>recStart</code> column:</p>
<pre><code>variable,recStart,recEnd,catLabel
death_date,"[01JAN2001, 31MAR2017]","[2001-01-01, 2017-03-31]",Death date
death_date,else,NA::b,Missing</code></pre>
<p>The function parses the SAS format and generates R <code>Date</code> objects within the specified range.</p>
</section><section class="level3"><h3 id="example-basic-date-variable">Example: Basic date variable<a class="anchor" aria-label="anchor" href="#example-basic-date-variable"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://big-life-lab.github.io/MockData/">MockData</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load DemPoRT metadata (has date variables)</span></span>
<span><span class="va">variable_details</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/demport/variable_details_DemPoRT.csv"</span>, package <span class="op">=</span> <span class="st">"MockData"</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate death dates</span></span>
<span><span class="va">death_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"death_date"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"ices"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View sample</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">death_dates</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  death_date
1 2016-11-17
2 2009-06-18
3 2008-06-25
4 2001-04-02
5 2007-05-18
6 2016-01-06</code></pre>
</div>
</div>
<p><strong>Date range:</strong> Minimum: 2001-01-01, Maximum: 2017-03-09, Sample size: 1000</p>
</section></section><section class="level2"><h2 id="distribution-options">Distribution options<a class="anchor" aria-label="anchor" href="#distribution-options"></a>
</h2>
<p>Date variables support three distribution types to create realistic temporal patterns.</p>
<section class="level3"><h3 id="uniform-distribution-default">Uniform distribution (default)<a class="anchor" aria-label="anchor" href="#uniform-distribution-default"></a>
</h3>
<p>Equal probability across all dates in the range. Suitable for calendar dates with no temporal bias.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates_uniform</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"study_entry_date"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"ices"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"uniform"</span>,  <span class="co"># Default</span></span>
<span>  seed <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Use cases:</strong></p>
<ul>
<li>Study recruitment dates</li>
<li>Random calendar events</li>
<li>Administrative dates</li>
</ul></section><section class="level3"><h3 id="gompertz-distribution">Gompertz distribution<a class="anchor" aria-label="anchor" href="#gompertz-distribution"></a>
</h3>
<p>Events concentrate near the end of the range, following a Gompertz survival distribution. Useful for modeling mortality and age-related events.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates_gompertz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"death_date"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"ices"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"gompertz"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Use cases:</strong></p>
<ul>
<li>Death dates (mortality increases with time)</li>
<li>Disease progression events</li>
<li>Age-related outcomes</li>
</ul>
<p><strong>Technical details:</strong></p>
<ul>
<li>Shape parameter (η) = 0.1</li>
<li>Rate parameter (b) = 0.01</li>
<li>Events cluster toward end of range</li>
</ul></section><section class="level3"><h3 id="exponential-distribution">Exponential distribution<a class="anchor" aria-label="anchor" href="#exponential-distribution"></a>
</h3>
<p>Events concentrate near the start of the range. Useful for time-to-event data where early events are more common.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates_exponential</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"first_hospitalization"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"ices"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"exponential"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Use cases:</strong></p>
<ul>
<li>First event occurrence</li>
<li>Early disease diagnosis</li>
<li>Initial treatment dates</li>
</ul>
<p><strong>Technical details:</strong></p>
<ul>
<li>Rate = 1 / (range / 3)</li>
<li>Mean event time at 1/3 of range</li>
<li>Events decay exponentially</li>
</ul></section><section class="level3"><h3 id="choosing-a-distribution">Choosing a distribution<a class="anchor" aria-label="anchor" href="#choosing-a-distribution"></a>
</h3>
<table class="table caption-top">
<thead><tr class="header">
<th>Distribution</th>
<th>Pattern</th>
<th>Best for</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Uniform</td>
<td>Flat across range</td>
<td>Calendar dates, random events</td>
</tr>
<tr class="even">
<td>Gompertz</td>
<td>Increases toward end</td>
<td>Mortality, age-related outcomes</td>
</tr>
<tr class="odd">
<td>Exponential</td>
<td>Decreases from start</td>
<td>First events, early diagnoses</td>
</tr>
</tbody>
</table></section><section class="level3"><h3 id="comparing-distributions">Comparing distributions<a class="anchor" aria-label="anchor" href="#comparing-distributions"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate dates with each distribution</span></span>
<span><span class="va">dates_uniform</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"death_date"</span>, cycle <span class="op">=</span> <span class="st">"demport"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>, df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"uniform"</span>, seed <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">dates_gompertz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"death_date"</span>, cycle <span class="op">=</span> <span class="st">"demport"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>, df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"gompertz"</span>, seed <span class="op">=</span> <span class="fl">101</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">dates_exponential</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"death_date"</span>, cycle <span class="op">=</span> <span class="st">"demport"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>, df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"exponential"</span>, seed <span class="op">=</span> <span class="fl">102</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate medians</span></span>
<span><span class="va">median_uniform</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">dates_uniform</span><span class="op">$</span><span class="va">death_date</span><span class="op">)</span>, <span class="st">"%Y-%m-%d"</span><span class="op">)</span></span>
<span><span class="va">median_gompertz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">dates_gompertz</span><span class="op">$</span><span class="va">death_date</span><span class="op">)</span>, <span class="st">"%Y-%m-%d"</span><span class="op">)</span></span>
<span><span class="va">median_exponential</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">dates_exponential</span><span class="op">$</span><span class="va">death_date</span><span class="op">)</span>, <span class="st">"%Y-%m-%d"</span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Median dates by distribution:</strong></p>
<ul>
<li>Uniform: NULL</li>
<li>Gompertz: NULL</li>
<li>Exponential: NULL</li>
</ul>
<p>Notice how:</p>
<ul>
<li>
<strong>Uniform</strong>: Median near middle of range (2009)</li>
<li>
<strong>Gompertz</strong>: Median shifted toward end (2013) - realistic for mortality</li>
<li>
<strong>Exponential</strong>: Median shifted toward start (2005) - realistic for early events</li>
</ul></section></section><section class="level2"><h2 id="missing-data">Missing data<a class="anchor" aria-label="anchor" href="#missing-data"></a>
</h2>
<p>Use <code>prop_NA</code> to introduce missing dates:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates_with_na</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"death_date"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"ices"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  prop_NA <span class="op">=</span> <span class="fl">0.05</span>,  <span class="co"># 5% missing</span></span>
<span>  seed <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check missing proportion</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">dates_with_na</span><span class="op">$</span><span class="va">death_date</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fl">1000</span>  <span class="co"># ~0.05</span></span></code></pre></div>
</div>
<p><strong>Note</strong>: Date variables use R <code>NA</code> values rather than numeric codes, even if NA codes are specified in the metadata.</p>
</section><section class="level2"><h2 id="source-format-simulating-raw-data-imports">Source format: simulating raw data imports<a class="anchor" aria-label="anchor" href="#source-format-simulating-raw-data-imports"></a>
</h2>
<p>By default, MockData generates dates as R <code>Date</code> objects (analysis-ready format). However, real survey data comes in different formats depending on the source. The <code>source_format</code> parameter simulates how dates appear after importing from different file types.</p>
<section class="level3"><h3 id="available-formats">Available formats<a class="anchor" aria-label="anchor" href="#available-formats"></a>
</h3>
<p><strong>analysis (default)</strong>: R Date objects</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Default behavior - analysis-ready dates</span></span>
<span><span class="va">mock</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="st">"variables.csv"</span>,</span>
<span>  details_path <span class="op">=</span> <span class="st">"variable_details.csv"</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  source_format <span class="op">=</span> <span class="st">"analysis"</span>  <span class="co"># Default</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mock</span><span class="op">$</span><span class="va">interview_date</span><span class="op">)</span></span>
<span><span class="co"># [1] "Date"</span></span></code></pre></div>
</div>
<p><strong>csv</strong>: Character strings (ISO format)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate dates as they appear after read.csv()</span></span>
<span><span class="va">mock_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="st">"variables.csv"</span>,</span>
<span>  details_path <span class="op">=</span> <span class="st">"variable_details.csv"</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  source_format <span class="op">=</span> <span class="st">"csv"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mock_csv</span><span class="op">$</span><span class="va">interview_date</span><span class="op">)</span></span>
<span><span class="co"># [1] "character"</span></span>
<span></span>
<span><span class="va">mock_csv</span><span class="op">$</span><span class="va">interview_date</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co"># [1] "2001-01-15" "2001-02-22" "2001-03-30"</span></span></code></pre></div>
</div>
<p><strong>sas</strong>: Numeric values (days since 1960-01-01)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate dates as they appear after haven::read_sas()</span></span>
<span><span class="va">mock_sas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="st">"variables.csv"</span>,</span>
<span>  details_path <span class="op">=</span> <span class="st">"variable_details.csv"</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  source_format <span class="op">=</span> <span class="st">"sas"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">mock_sas</span><span class="op">$</span><span class="va">interview_date</span><span class="op">)</span></span>
<span><span class="co"># [1] "numeric"</span></span>
<span></span>
<span><span class="va">mock_sas</span><span class="op">$</span><span class="va">interview_date</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co"># [1] 15050 15087 15123  # Days since 1960-01-01</span></span></code></pre></div>
</div>
</section><section class="level3"><h3 id="use-case-testing-harmonization-pipelines">Use case: testing harmonization pipelines<a class="anchor" aria-label="anchor" href="#use-case-testing-harmonization-pipelines"></a>
</h3>
<p>The <code>source_format</code> parameter is particularly useful for testing date parsing and harmonization code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate CSV-format mock data</span></span>
<span><span class="va">mock_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span></span>
<span>  config_path <span class="op">=</span> <span class="st">"cchs_variables.csv"</span>,</span>
<span>  details_path <span class="op">=</span> <span class="st">"cchs_variable_details.csv"</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  source_format <span class="op">=</span> <span class="st">"csv"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Test your harmonization logic</span></span>
<span><span class="va">harmonized</span> <span class="op">&lt;-</span> <span class="va">mock_csv</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    <span class="co"># Parse character dates</span></span>
<span>    interview_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">interview_date</span>, format <span class="op">=</span> <span class="st">"%Y-%m-%d"</span><span class="op">)</span>,</span>
<span></span>
<span>    <span class="co"># Calculate age at baseline</span></span>
<span>    age_at_baseline <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">interview_date</span> <span class="op">-</span> <span class="va">birth_date</span><span class="op">)</span> <span class="op">/</span> <span class="fl">365.25</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Verify harmonization succeeded</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="va">harmonized</span><span class="op">$</span><span class="va">interview_date</span>, <span class="st">"Date"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">harmonized</span><span class="op">$</span><span class="va">age_at_baseline</span> <span class="op">&gt;=</span> <span class="fl">0</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="level3"><h3 id="why-this-matters">Why this matters<a class="anchor" aria-label="anchor" href="#why-this-matters"></a>
</h3>
<p>Real survey data doesn’t arrive as clean R Date objects:</p>
<ul>
<li>
<strong>CSV files</strong>: Dates are character strings that need parsing</li>
<li>
<strong>SAS files</strong>: Dates may be numeric (if haven doesn’t auto-convert)</li>
<li>
<strong>SPSS/Stata files</strong>: Various numeric formats with different epochs</li>
</ul>
<p>Using <code>source_format</code> lets you test your entire harmonization pipeline, not just the analysis code.</p>
</section><section class="level3"><h3 id="converting-between-formats">Converting between formats<a class="anchor" aria-label="anchor" href="#converting-between-formats"></a>
</h3>
<p>All formats represent the same underlying dates:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate in all three formats (same seed = same dates)</span></span>
<span><span class="va">mock_analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span><span class="va">...</span>, source_format <span class="op">=</span> <span class="st">"analysis"</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">mock_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span><span class="va">...</span>, source_format <span class="op">=</span> <span class="st">"csv"</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">mock_sas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_mock_data.html">create_mock_data</a></span><span class="op">(</span><span class="va">...</span>, source_format <span class="op">=</span> <span class="st">"sas"</span>, seed <span class="op">=</span> <span class="fl">123</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Convert back to Date for comparison</span></span>
<span><span class="va">dates_from_csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">mock_csv</span><span class="op">$</span><span class="va">interview_date</span><span class="op">)</span></span>
<span><span class="va">dates_from_sas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">mock_sas</span><span class="op">$</span><span class="va">interview_date</span>, origin <span class="op">=</span> <span class="st">"1960-01-01"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Verify all represent same dates</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">mock_analysis</span><span class="op">$</span><span class="va">interview_date</span> <span class="op">==</span> <span class="va">dates_from_csv</span><span class="op">)</span>  <span class="co"># TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">mock_analysis</span><span class="op">$</span><span class="va">interview_date</span> <span class="op">==</span> <span class="va">dates_from_sas</span><span class="op">)</span>  <span class="co"># TRUE</span></span></code></pre></div>
</div>
</section></section><section class="level2"><h2 id="invalid-dates-for-testing">Invalid dates for testing<a class="anchor" aria-label="anchor" href="#invalid-dates-for-testing"></a>
</h2>
<p>The <code>prop_invalid</code> parameter generates out-of-period dates to test validation pipelines.</p>
<section class="level3"><h3 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates_dirty</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"death_date"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"ices"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  prop_invalid <span class="op">=</span> <span class="fl">0.03</span>,  <span class="co"># 3% invalid</span></span>
<span>  seed <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check for dates outside valid range</span></span>
<span><span class="va">valid_start</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2001-01-01"</span><span class="op">)</span></span>
<span><span class="va">valid_end</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2017-03-31"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">n_too_early</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">dates_dirty</span><span class="op">$</span><span class="va">death_date</span> <span class="op">&lt;</span> <span class="va">valid_start</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">n_too_late</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">dates_dirty</span><span class="op">$</span><span class="va">death_date</span> <span class="op">&gt;</span> <span class="va">valid_end</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">total_invalid</span> <span class="op">&lt;-</span> <span class="va">n_too_early</span> <span class="op">+</span> <span class="va">n_too_late</span></span>
<span><span class="va">pct_invalid</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"%.1f%%"</span>, <span class="fl">100</span> <span class="op">*</span> <span class="va">total_invalid</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">dates_dirty</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Invalid date summary:</strong></p>
<ul>
<li>Dates before range: 15</li>
<li>Dates after range: 0</li>
<li>Total invalid: 15 out of 1000 (1.5%)</li>
</ul>
<p><strong>Sample invalid dates:</strong></p>
<ul>
<li>Too early: 2000-12-31, 2000-12-31, 2000-12-31</li>
<li>Too late:</li>
</ul></section><section class="level3"><h3 id="invalid-date-characteristics">Invalid date characteristics<a class="anchor" aria-label="anchor" href="#invalid-date-characteristics"></a>
</h3>
<ul>
<li>
<strong>Range</strong>: 1-5 years before start or after end</li>
<li>
<strong>Distribution</strong>: Split evenly between too-early and too-late</li>
<li>
<strong>Realism</strong>: Mimics common data entry errors</li>
</ul></section><section class="level3"><h3 id="combining-na-and-invalid">Combining NA and invalid<a class="anchor" aria-label="anchor" href="#combining-na-and-invalid"></a>
</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates_complex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"death_date"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"ices"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  prop_NA <span class="op">=</span> <span class="fl">0.02</span>,        <span class="co"># 2% missing</span></span>
<span>  prop_invalid <span class="op">=</span> <span class="fl">0.03</span>,   <span class="co"># 3% invalid</span></span>
<span>  seed <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Validation check</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="va">prop_NA</span> <span class="op">+</span> <span class="va">prop_invalid</span> <span class="op">&lt;=</span> <span class="fl">1.0</span><span class="op">)</span>  <span class="co"># Must sum to ≤ 1</span></span></code></pre></div>
</div>
</section></section><section class="level2"><h2 id="configuration-driven-workflow">Configuration-driven workflow<a class="anchor" aria-label="anchor" href="#configuration-driven-workflow"></a>
</h2>
<p>For complex studies with multiple events and data quality parameters, use configuration files to manage settings. This approach improves reproducibility and makes it easy to share study specifications.</p>
<section class="level3"><h3 id="using-configuration-files">Using configuration files<a class="anchor" aria-label="anchor" href="#using-configuration-files"></a>
</h3>
<p>Configuration files are CSV files with four columns: parameter, value, type, and description. They specify study design, time windows, event parameters, and data quality settings.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load configuration</span></span>
<span><span class="va">config</span> <span class="op">&lt;-</span> <span class="fu">read_study_config</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/study_config_example.csv"</span>, package <span class="op">=</span> <span class="st">"MockData"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Validate configuration</span></span>
<span><span class="fu">validate_study_config</span><span class="op">(</span><span class="va">config</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate survival data using config parameters</span></span>
<span><span class="va">survival_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_survival_dates.html">create_survival_dates</a></span><span class="op">(</span></span>
<span>  entry_var <span class="op">=</span> <span class="st">"index_date"</span>,</span>
<span>  event_var <span class="op">=</span> <span class="st">"death_date"</span>,</span>
<span>  entry_start <span class="op">=</span> <span class="va">config</span><span class="op">$</span><span class="va">accrual_start</span>,</span>
<span>  entry_end <span class="op">=</span> <span class="va">config</span><span class="op">$</span><span class="va">accrual_end</span>,</span>
<span>  followup_min <span class="op">=</span> <span class="va">config</span><span class="op">$</span><span class="va">followup_min</span>,</span>
<span>  followup_max <span class="op">=</span> <span class="va">config</span><span class="op">$</span><span class="va">followup_max</span>,</span>
<span>  length <span class="op">=</span> <span class="va">config</span><span class="op">$</span><span class="va">sample_size</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  event_distribution <span class="op">=</span> <span class="va">config</span><span class="op">$</span><span class="va">death_distribution</span>,</span>
<span>  prop_censored <span class="op">=</span> <span class="va">config</span><span class="op">$</span><span class="va">prop_censored</span>,</span>
<span>  seed <span class="op">=</span> <span class="va">config</span><span class="op">$</span><span class="va">seed</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Benefits:</strong></p>
<ul>
<li>All study parameters in one file</li>
<li>Easy to version control and share</li>
<li>Validates parameters before generation</li>
<li>Documents study design decisions</li>
<li>Supports both open cohort and fixed follow-up designs</li>
</ul>
<p>See <code>inst/extdata/study_config_example.csv</code> for a complete example configuration.</p>
</section></section><section class="level2"><h2 id="survival-analysis-workflows">Survival analysis workflows<a class="anchor" aria-label="anchor" href="#survival-analysis-workflows"></a>
</h2>
<section class="level3"><h3 id="basic-cohort-study">Basic cohort study<a class="anchor" aria-label="anchor" href="#basic-cohort-study"></a>
</h3>
<p>Use <code><a href="../reference/create_survival_dates.html">create_survival_dates()</a></code> to generate paired entry and event dates with guaranteed temporal ordering:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Mortality study with 5-year recruitment, up to 10-year follow-up</span></span>
<span><span class="va">surv_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_survival_dates.html">create_survival_dates</a></span><span class="op">(</span></span>
<span>  entry_var <span class="op">=</span> <span class="st">"cohort_entry"</span>,</span>
<span>  event_var <span class="op">=</span> <span class="st">"death_date"</span>,</span>
<span>  entry_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2000-01-01"</span><span class="op">)</span>,</span>
<span>  entry_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2004-12-31"</span><span class="op">)</span>,</span>
<span>  followup_min <span class="op">=</span> <span class="fl">365</span>,       <span class="co"># Min 1 year follow-up</span></span>
<span>  followup_max <span class="op">=</span> <span class="fl">3650</span>,      <span class="co"># Max 10 years</span></span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  event_distribution <span class="op">=</span> <span class="st">"gompertz"</span>,  <span class="co"># Realistic mortality pattern</span></span>
<span>  seed <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View sample</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">surv_data</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cohort_entry death_date
1   2004-10-03 2014-10-01
2   2001-05-17 2011-05-15
3   2003-10-13 2013-10-10
4   2004-07-05 2014-07-03
5   2002-09-11 2012-09-08</code></pre>
</div>
</div>
<p><strong>Key features:</strong></p>
<ul>
<li>Entry dates uniformly distributed across recruitment period</li>
<li>Event dates follow Gompertz distribution (mortality increases with time)</li>
<li>Guaranteed: <code>death_date &gt; cohort_entry</code> for all records</li>
</ul>
<p><strong>Follow-up time summary (days):</strong></p>
<ul>
<li>Median: 3650</li>
<li>Range: 3650 - 3650</li>
<li>Mean: 3650</li>
</ul></section><section class="level3"><h3 id="censoring">Censoring<a class="anchor" aria-label="anchor" href="#censoring"></a>
</h3>
<p>Add censoring to simulate incomplete follow-up:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">surv_censored</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_survival_dates.html">create_survival_dates</a></span><span class="op">(</span></span>
<span>  entry_var <span class="op">=</span> <span class="st">"entry"</span>,</span>
<span>  event_var <span class="op">=</span> <span class="st">"event"</span>,</span>
<span>  entry_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2010-01-01"</span><span class="op">)</span>,</span>
<span>  entry_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2015-12-31"</span><span class="op">)</span>,</span>
<span>  followup_min <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  followup_max <span class="op">=</span> <span class="fl">1825</span>,  <span class="co"># 5 years</span></span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  event_distribution <span class="op">=</span> <span class="st">"exponential"</span>,</span>
<span>  prop_censored <span class="op">=</span> <span class="fl">0.3</span>,  <span class="co"># 30% censored</span></span>
<span>  seed <span class="op">=</span> <span class="fl">200</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">surv_censored</span>, <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       entry      event event_status
1 2013-10-25 2018-05-28            1
2 2014-11-10 2015-02-13            1
3 2010-08-20 2012-12-22            1
4 2014-10-22 2017-12-27            1
5 2014-04-29 2015-09-08            1</code></pre>
</div>
</div>
<p>The <code>event_status</code> column indicates:</p>
<ul>
<li>
<strong>1</strong> = event observed (death occurred)</li>
<li>
<strong>0</strong> = censored (lost to follow-up, end of study)</li>
</ul>
<p><strong>Censoring summary:</strong></p>
<ul>
<li>Events: 700 (70.0%)</li>
<li>Censored: 300 (30.0%)</li>
</ul></section><section class="level3"><h3 id="distribution-comparison-for-survival-data">Distribution comparison for survival data<a class="anchor" aria-label="anchor" href="#distribution-comparison-for-survival-data"></a>
</h3>
<p>Different distributions create different event patterns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Uniform: constant hazard</span></span>
<span><span class="va">surv_uniform</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_survival_dates.html">create_survival_dates</a></span><span class="op">(</span></span>
<span>  entry_var <span class="op">=</span> <span class="st">"entry"</span>, event_var <span class="op">=</span> <span class="st">"event"</span>,</span>
<span>  entry_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2015-01-01"</span><span class="op">)</span>,</span>
<span>  entry_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2015-12-31"</span><span class="op">)</span>,</span>
<span>  followup_min <span class="op">=</span> <span class="fl">100</span>, followup_max <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>, df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  event_distribution <span class="op">=</span> <span class="st">"uniform"</span>, seed <span class="op">=</span> <span class="fl">301</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Gompertz: increasing hazard (aging population)</span></span>
<span><span class="va">surv_gompertz</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_survival_dates.html">create_survival_dates</a></span><span class="op">(</span></span>
<span>  entry_var <span class="op">=</span> <span class="st">"entry"</span>, event_var <span class="op">=</span> <span class="st">"event"</span>,</span>
<span>  entry_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2015-01-01"</span><span class="op">)</span>,</span>
<span>  entry_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2015-12-31"</span><span class="op">)</span>,</span>
<span>  followup_min <span class="op">=</span> <span class="fl">100</span>, followup_max <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>, df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  event_distribution <span class="op">=</span> <span class="st">"gompertz"</span>, seed <span class="op">=</span> <span class="fl">302</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Exponential: early events (diagnosis, treatment failure)</span></span>
<span><span class="va">surv_exponential</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_survival_dates.html">create_survival_dates</a></span><span class="op">(</span></span>
<span>  entry_var <span class="op">=</span> <span class="st">"entry"</span>, event_var <span class="op">=</span> <span class="st">"event"</span>,</span>
<span>  entry_start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2015-01-01"</span><span class="op">)</span>,</span>
<span>  entry_end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2015-12-31"</span><span class="op">)</span>,</span>
<span>  followup_min <span class="op">=</span> <span class="fl">100</span>, followup_max <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">1000</span>, df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  event_distribution <span class="op">=</span> <span class="st">"exponential"</span>, seed <span class="op">=</span> <span class="fl">303</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare median survival times</span></span>
<span><span class="va">followup_uniform</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">surv_uniform</span><span class="op">$</span><span class="va">event</span> <span class="op">-</span> <span class="va">surv_uniform</span><span class="op">$</span><span class="va">entry</span><span class="op">)</span></span>
<span><span class="va">followup_gompertz</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">surv_gompertz</span><span class="op">$</span><span class="va">event</span> <span class="op">-</span> <span class="va">surv_gompertz</span><span class="op">$</span><span class="va">entry</span><span class="op">)</span></span>
<span><span class="va">followup_exponential</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">surv_exponential</span><span class="op">$</span><span class="va">event</span> <span class="op">-</span> <span class="va">surv_exponential</span><span class="op">$</span><span class="va">entry</span><span class="op">)</span></span>
<span></span>
<span><span class="va">median_uniform_tte</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">followup_uniform</span><span class="op">)</span></span>
<span><span class="va">median_gompertz_tte</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">followup_gompertz</span><span class="op">)</span></span>
<span><span class="va">median_exponential_tte</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">followup_exponential</span><span class="op">)</span></span></code></pre></div>
</div>
<p><strong>Median time-to-event (days):</strong></p>
<ul>
<li>Uniform: 565.5</li>
<li>Gompertz: 1000</li>
<li>Exponential: 302.5</li>
</ul>
<p><strong>Pattern interpretation:</strong></p>
<ul>
<li>
<strong>Uniform</strong>: Events spread evenly across follow-up</li>
<li>
<strong>Gompertz</strong>: More events later (realistic for age-related mortality)</li>
<li>
<strong>Exponential</strong>: More events early (realistic for disease progression)</li>
</ul></section><section class="level3"><h3 id="longitudinal-studies">Longitudinal studies<a class="anchor" aria-label="anchor" href="#longitudinal-studies"></a>
</h3>
<p>Generate visit dates across a study period:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Baseline visit (uniform across recruitment period)</span></span>
<span><span class="va">baseline</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"visit_baseline"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"cohort"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"uniform"</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">200</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Follow-up visits would be generated relative to baseline</span></span>
<span><span class="co"># (Currently manual - see planned temporal constraints in parking-lot.md)</span></span></code></pre></div>
</div>
</section><section class="level3"><h3 id="testing-data-validation">Testing data validation<a class="anchor" aria-label="anchor" href="#testing-data-validation"></a>
</h3>
<p>Generate realistic errors for pipeline testing:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create test data with multiple error types</span></span>
<span><span class="va">test_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span></span>
<span>  var_raw <span class="op">=</span> <span class="st">"death_date"</span>,</span>
<span>  cycle <span class="op">=</span> <span class="st">"ices"</span>,</span>
<span>  variable_details <span class="op">=</span> <span class="va">variable_details</span>,</span>
<span>  length <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  df_mock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  prop_NA <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  prop_invalid <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">300</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Test your validation function</span></span>
<span><span class="va">validate_dates</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">dates</span>, <span class="va">min_date</span>, <span class="va">max_date</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">errors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Check for missing</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">dates</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">errors</span><span class="op">$</span><span class="va">missing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">dates</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># Check for out-of-range</span></span>
<span>  <span class="va">valid_dates</span> <span class="op">&lt;-</span> <span class="va">dates</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">dates</span><span class="op">)</span><span class="op">]</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">valid_dates</span> <span class="op">&lt;</span> <span class="va">min_date</span> <span class="op">|</span> <span class="va">valid_dates</span> <span class="op">&gt;</span> <span class="va">max_date</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">errors</span><span class="op">$</span><span class="va">out_of_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span></span>
<span>      <span class="va">valid_dates</span> <span class="op">&lt;</span> <span class="va">min_date</span> <span class="op">|</span> <span class="va">valid_dates</span> <span class="op">&gt;</span> <span class="va">max_date</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">errors</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Run validation</span></span>
<span><span class="va">errors</span> <span class="op">&lt;-</span> <span class="fu">validate_dates</span><span class="op">(</span></span>
<span>  <span class="va">test_dates</span><span class="op">$</span><span class="va">death_date</span>,</span>
<span>  min_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2001-01-01"</span><span class="op">)</span>,</span>
<span>  max_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2017-03-31"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The errors list will contain any validation issues found</span></span></code></pre></div>
</div>
</section></section><section class="level2"><h2 id="best-practices">Best practices<a class="anchor" aria-label="anchor" href="#best-practices"></a>
</h2>
<section class="level3"><h3 id="seed-management">Seed management<a class="anchor" aria-label="anchor" href="#seed-management"></a>
</h3>
<p>Use different seeds for different date variables to ensure independence:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">birth_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span><span class="va">...</span>, seed <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="va">death_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span><span class="va">...</span>, seed <span class="op">=</span> <span class="fl">101</span><span class="op">)</span></span>
<span><span class="va">diagnosis_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span><span class="va">...</span>, seed <span class="op">=</span> <span class="fl">102</span><span class="op">)</span></span></code></pre></div>
</div>
</section><section class="level3"><h3 id="distribution-selection">Distribution selection<a class="anchor" aria-label="anchor" href="#distribution-selection"></a>
</h3>
<ol type="1">
<li>
<strong>Start with uniform</strong> for calendar dates without known patterns</li>
<li>
<strong>Use Gompertz</strong> for mortality and age-related outcomes</li>
<li>
<strong>Use exponential</strong> for first-event or early-diagnosis scenarios</li>
<li>
<strong>Validate</strong> against real data distributions when possible</li>
</ol></section><section class="level3"><h3 id="temporal-constraints">Temporal constraints<a class="anchor" aria-label="anchor" href="#temporal-constraints"></a>
</h3>
<p><strong>Current limitation</strong>: MockData v0.2.0 does not enforce temporal relationships between dates (e.g., birth &lt; death).</p>
<p><strong>Workarounds</strong>:</p>
<ul>
<li>Generate dates independently and post-process</li>
<li>Use appropriate distributions to minimize violations</li>
<li>Document assumptions in your code</li>
</ul>
<p><strong>Future</strong>: See <a href="../parking-lot.html">parking-lot.md</a> for planned <code>after</code>/<code>before</code> parameters in v0.3.0.</p>
</section><section class="level3"><h3 id="testing-strategies">Testing strategies<a class="anchor" aria-label="anchor" href="#testing-strategies"></a>
</h3>
<ol type="1">
<li>
<p><strong>Test both valid and invalid data</strong>:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Valid data for algorithm testing</span></span>
<span><span class="va">clean_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span><span class="va">...</span>, prop_invalid <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Dirty data for validation testing</span></span>
<span><span class="va">dirty_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span><span class="va">...</span>, prop_invalid <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p><strong>Use realistic error proportions</strong>:</p>
<ul>
<li>Real surveys: 1-5% invalid</li>
<li>Administrative data: 0.1-1% invalid</li>
<li>Manual entry: 5-10% invalid</li>
</ul>
</li>
<li>
<p><strong>Document your assumptions</strong>:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate dates with 3% invalid to match historical error rate</span></span>
<span><span class="co"># from 2015-2017 data linkage (see docs/data-quality-report.pdf)</span></span>
<span><span class="va">test_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_date_var.html">create_date_var</a></span><span class="op">(</span><span class="va">...</span>, prop_invalid <span class="op">=</span> <span class="fl">0.03</span><span class="op">)</span></span></code></pre></div>
</li>
</ol></section></section><section class="level2"><h2 id="limitations-and-future-enhancements">Limitations and future enhancements<a class="anchor" aria-label="anchor" href="#limitations-and-future-enhancements"></a>
</h2>
<section class="level3"><h3 id="current-limitations">Current limitations<a class="anchor" aria-label="anchor" href="#current-limitations"></a>
</h3>
<ul>
<li>No automatic temporal constraints between dates</li>
<li>Limited distribution options (3 types)</li>
<li>No support for recurrent events</li>
<li>No time-varying covariates</li>
</ul></section><section class="level3"><h3 id="planned-features">Planned features<a class="anchor" aria-label="anchor" href="#planned-features"></a>
</h3>
<p>See <a href="../parking-lot.html">parking-lot.md</a> for:</p>
<ul>
<li>
<strong>Temporal constraints</strong> (v0.3.0): <code>after</code>, <code>before</code> parameters</li>
<li>
<strong>Survival helpers</strong> (v0.3.0): <code>create_survival_vars()</code>
</li>
<li>
<strong>Recurrent events</strong> (v0.4.0): Multiple events per subject</li>
<li>
<strong>Time-varying covariates</strong> (v0.5.0): Variables that change over time</li>
</ul></section></section><section class="level2"><h2 id="next-steps">Next steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<ul>
<li>
<a href="user-guide.html">User guide</a> - Comprehensive feature documentation</li>
<li>
<a href="demport-example.html">DemPoRT example</a> - Applied survival analysis workflow</li>
<li>
<a href="advanced-topics.html">Advanced topics</a> - Custom distributions and workflows</li>
<li>
<code><a href="../reference/create_date_var.html">?create_date_var</a></code> - Function reference</li>
</ul></section><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config);
    }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script></main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>
Developed by Juan Li and recodeflow contributors.
</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
